@model IEnumerable<RightsU_Entities.USP_Title_Objection_Adv_List_Result>
@using UTOFrameWork.FrameworkClasses;
<script type="text/javascript">
    var IsCall = 'Y', RecordCount_PVG = '@ViewBag.RecordCount', PageNo_PVG = '@ViewBag.PageNo';
    $(document).ready(function () {
        if ($('.pagination'))
            SetPaging();

    });
    function SetPaging() {
        var PageNo, recordCnt;
        IsCall = 'N';
        if (PageNo_PVG != null)
            PageNo = PageNo_PVG;
        if (RecordCount_PVG != null)
            recordCnt = RecordCount_PVG;
        PageNo = PageNo - 1;
        var opt = { callback: pageselectCallback };
        debugger;
        opt["items_per_page"] = 10;
        opt["num_display_entries"] = 5;
        opt["num"] = 10;
        opt["prev_text"] = "<<";
        opt["next_text"] = ">>";
        opt["current_page"] = PageNo;
        $(".pagination").pagination(recordCnt, opt);
    }
    
    function pageselectCallback(page_index, jq) {
        if (IsCall == 'Y')
            LoadDeals(page_index, tmp_IsAdvanced, 'N');
        else
            IsCall = 'Y';
    }

</script>

@{
    LoginEntity objLoginEntity = new LoginEntity();
    if (Session["objLoginEntity"] != null)
    {
        objLoginEntity = (LoginEntity)Session["objLoginEntity"];
    }
    MessageKey objMessageKey = new MessageKey();
    if (Session["objMessageKey"] != null)
    {

        objMessageKey = (MessageKey)Session["objMessageKey"];
    }
}
<script src="~/JS_Core/jquery.mark.min.js?v=@System.Configuration.ConfigurationManager.AppSettings["Version_No"]"></script>

<script>


    $('.expand_DealTitles').expander({
        slicePoint: 33,
        expandPrefix: '',
        expandText: '...@objMessageKey.readmore',
        collapseTimer: 0,
        userCollapseText: '<span>[^]</span>'
    });
    function AllsubmenuHide() {
        debugger;
        $('.leftPanel').css('left', panelHideCss);
        $('.MoreActionDiv').hide('slow');
    }

    $(document).ready(function () {
        if ('@objMessageKey.LayoutDirection' == 'RTL') {
            $('.MoreActionDiv').css("left", "32px");
            $('.modal .scale_table_block').css("margin", "5px");
        }
        var mark = function () {
            var keyword = $("#srchCommon").val();
            var options = { 'separateWordSearch': true };
            $(".Highlight").unmark({
                done: function () {
                    $(".Highlight").mark(keyword, options);
                }
            });
            $("#srchCommon").on("input", mark);
            $("#srchCommon").on("change", mark);
        }

        $('.show_hide').click(function () {
            debugger;
            $(".tooltip").stop().fadeIn();
            $('.MoreActionDiv').slideUp();
            $(this).parent().find('.MoreActionDiv').slideToggle('fast');
            return false;
        }, function () {
            debugger;
            $(".tooltip").stop().fadeOut();
            $('.MoreActionDiv').slideUp();
            $(this).parent().find('.MoreActionDiv').slideToggle('fast');
            return false;
        });
    });
</script>
<style>
    .MoreActionDiv {
        padding: 2px;
        background: #ffffff;
        width: 40px;
        height: inherit;
        box-shadow: 0 0 5px #aaa;
        font-size: 15px;
        color: #fff;
        text-align: center;
        position: absolute;
        z-index: 99;
        right: 32px;
    }


    span.not-available {
        font-style: italic;
        opacity: 0.5;
    }
    /*.modal .scale_table_block {
    margin: 5px !important;*/
    }
    .acq {
        border-left: 4px solid #2b64a5 !important;
    }
    .syn {
        border-left: 4px solid #d0021b !important;
    }
</style>
<div class="paging_area clearfix">
    <span class="pull-left">@objMessageKey.TotalRecords:  @ViewBag.RecordCount</span>
    <div class="pagination" id="Pagination_List"></div>
</div>

<div class="grid_area deal clearfix" onclick="AllsubmenuHide();">
    @Html.Hidden("hdnAcqDealCode")
    @{
        int tempCount = 0;
        int counter = 0;
        char type;
        foreach (var objAcqList in Model)
        {
            tempCount = tempCount + 1;
            counter += 1;
            {
                 type = objAcqList.Agreement_No[0];
            }
        <div class="@(type == 'A' ? "acq grid_item":"syn grid_item ")">
                <ul>
                    <li class="deal_no">
                        <h4 class="agreementNo Highlight" data-toggle="tooltip" title="@objMessageKey.AgreementNo"> <a href="#" onclick="window.location.href='@Url.Action("ButtonEvents", "Acq_List", new { CommandName = "View", Acq_Deal_Code = objAcqList.Deal_Code }) '">@Html.Label("id", objAcqList.Agreement_No, new { style = "cursor:pointer;" })</a></h4>
                        @*<span class="deal_version VR_@objAcqList.Deal_Code" title="@objMessageKey.VersionNo">V-@objAcqList.version</span>*@
                    </li>
                    <li><span class="seperator">| </span></li>
                    <li class="deal_desc" title="Deal Description">
                        <div class="expandable">
                            @objAcqList.Deal_Desc<a href="#"><span></span></a>
                        </div>
                    </li>
                    <li><span class="seperator">| </span></li>
                    <li style="width:28% !important" >
                        <span title="Type of Objection" >
                            @objAcqList.Objection_Type_Name
                        </span>
                    </li>
                    <li style="width:11%">
                        @{
                            string groupname = objAcqList.Status;
                            <span class="deal_workflow_status" title="Objection Status">@groupname</span>
                        }
                    </li>
                </ul>
                <ul>
            <li class="deal_title">
                <span class="Highlight" title="@objMessageKey.Title">
                    @objAcqList.Title_Name
                </span>
            </li>
            <li class="deal_licensor Highlight" title="@objMessageKey.Licensor">@objAcqList.Vendor_Name</li>
            <li class="deal_territory" title="Country/Territory">
                @if (string.IsNullOrEmpty(objAcqList.CountryDetails))
                {
                    <span class="not-available">NO Country/Territory</span>
                }
                else
                {
                    <div class="expandable">
                        @objAcqList.CountryDetails
                        <a href="#"><span></span></a>
                    </div>
                }
            </li>

            <li class="deal_action clsTdAction_@objAcqList.Title_Objection_Code@objAcqList.Status TC_@tempCount" id="divAction_@tempCount">
                @{
                    int Count = 0;
                }
                @if (ViewBag.UserModuleRights.Contains("~" + GlobalParams.RightCodeForView.ToString() + "~"))
                {
                    <a title="@objMessageKey.View" id="View_@tempCount" class="glyphicon glyphicon-eye-open" href="@Url.Action("Index", "Title_Objection", new { callFrom = "VIEW", TitleObjectCode = objAcqList.Title_Objection_Code })"></a>
                }
                    <a id="btnShowError_@objAcqList.Title_Objection_Code" title="@objMessageKey.ShowError" class="glyphicon glyphicon-exclamation-sign" style="display: none; color: #2b64a5;"></a>
                @if (ViewBag.UserModuleRights.Contains("~" + GlobalParams.RightCodeForEdit.ToString() + "~"))
                {
                    <a title="@objMessageKey.Edit" id="Edit_@tempCount" class="glyphicon glyphicon-pencil AT_@objAcqList.Title_Objection_Code" onclick="return window.location.href='@Url.Action("Index", "Title_Objection", new { callFrom = "EDIT", TitleObjectCode = objAcqList.Title_Objection_Code})'"></a>
                }
                @if (Count > 3)
                {
                    <a title="@objMessageKey.MoreAction" id="show_hide_@tempCount" href="#" class="glyphicon glyphicon-option-vertical show_hide AT_@objAcqList.Title_Objection_Code"></a>
                    <div id="extend_@tempCount" class="MoreActionDiv" style="display:none;">
                    </div>
                }
            </li>

        </ul>
    </div>
        }
    }
</div>