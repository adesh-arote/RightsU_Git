function BindAdvanced_Search_Controls(n){n=="BTC"&&$("#divSearch").slideToggle(400);var t=!0;tmp_IsAdvanced=="Y"&&(t=!1);parseInt($("#ddlSrchBU option").length)==0&&$.ajax({type:"POST",url:URL_BindAdvanced_Search_Controls,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Is_Bind_Control:!0}),async:t,success:function(n){if(n=="true")redirectToLogin();else{$(n.USP_Result).each(function(){(this.Data_For=="DTP"||this.Data_For=="DTC")&&$("#ddlSrchDealType").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="DTG"&&$("#ddlSrchDealTag").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="BUT"&&$("#ddlSrchBU").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="TIT"&&$("#ddlSrchTitle").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="DIR"&&$("#ddlSrchDirector").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="VEN"&&$("#ddlSrchLicensor").append($("<option>").val(this.Display_Value).text(this.Display_Text))});var t=$(n.Obj_Acq_Syn_List_Search);$("#ddlSrchDealType").val(t[0].DealType_Search).attr("selected","true").trigger("chosen:updated");$("#ddlSrchDealTag").val(t[0].Status_Search).attr("selected","true").trigger("chosen:updated");$("#ddlSrchBU").val(t[0].BUCodes_Search).attr("selected","true").trigger("chosen:updated");$("#ddlSrchTitle").val(t[0].TitleCodes_Search.split(",")).attr("selected","true").trigger("chosen:updated");$("#ddlSrchDirector").val(t[0].DirectorCodes_Search.split(",")).attr("selected","true").trigger("chosen:updated");$("#ddlSrchLicensor").val(t[0].ProducerCodes_Search.split(",")).attr("selected","true").trigger("chosen:updated")}},error:function(n){alert("Error: "+n.responseText)}})}function LoadDeals(n,t){showLD=="Y"&&showLoading();var i="",r="",u="",f="N";tmp_pageNo=n;tmp_IsAdvanced=t;t=="N"?$("#divSearch").hide():t=="Y"&&parseInt($("#ddlSrchBU option").length)==0&&BindAdvanced_Search_Controls("PGL");$("#ddlSrchTitle").val()&&(i=$("#ddlSrchTitle").val().join(","));$("#ddlSrchDirector").val()&&(r=$("#ddlSrchDirector").val().join(","));$("#ddlSrchLicensor").val()&&(u=$("#ddlSrchLicensor").val().join(","));$("#chkSubDeal:checked").val()&&(f=$("#chkSubDeal:checked").val());$.ajax({type:"POST",url:URL_PartialDealList,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",dataType:"html",async:!0,data:JSON.stringify({Page:n,commonSearch:$("#srchCommon").val(),isTAdvanced:t,strDealNo:$("#txtSrchDealNo").val(),strfrom:$("#txtfrom").val(),strto:$("#txtto").val(),strSrchDealType:$("#ddlSrchDealType").val(),strSrchDealTag:$("#ddlSrchDealTag").val(),strWorkflowStatus:$("#ddlWorkflowStatus").val(),strTitles:i,strDirector:r,strLicensor:u,strBU:$("#ddlSrchBU").val(),strShowAll:ShowAll,strIncludeSubDeal:f,ClearSession:$("#hdnClearAll").val()}),success:function(n){n=="true"?redirectToLogin():($("#dvDealList").html(n),$("[title]").tooltip(),initializeExpander(),showLD=="Y"&&hideLoading())},error:function(){alert("Error: Please wait....Page is loading")}})}function validateSearch(){$("#srchCommon").val("");$("#hdnClearAll").val("N");var n="",t="",i="",r="N";$("#ddlSrchTitle").val()&&(n=$("#ddlSrchTitle").val().join(","));$("#ddlSrchDirector").val()&&(t=$("#ddlSrchDirector").val().join(","));$("#ddlSrchLicensor").val()&&(i=$("#ddlSrchLicensor").val().join(","));$("#chkSubDeal:checked").val()&&(r=$("#chkSubDeal:checked").val());var u=$("#txtSrchDealNo").val(),f=$("#txtfrom").val(),e=$("#txtto").val(),o=$("#ddlSrchDealTag").val(),s=$("#ddlSrchBU").val(),h=$("#ddlSrchDealType").val();if(u==""&&f==""&&e==""&&i==""&&t==""&&n==""&&o<"0"&&s<"0"&&h<"0")return showAlert("e","Please select/enter search criteria"),!1;showLD="Y";LoadDeals(0,"Y","N")}function ShowAll(){$("#divSearch").hide();$("#srchCommon").val("");$("#chkSubDeal").prop("checked","checked");$("#hdnClearAll").val("Y");$("#txtSrchDealNo").val("");$("#txtfrom").val("");$("#txtto").val("");$("#ddlSrchDealType").val(0);$("#ddlSrchDealTag").val(0);$("#ddlWorkflowStatus").val("0");$("#ddlSrchBU").val($("#ddlSrchBU option:first-child").val());OnChangeBindTitle();$("#ddlSrchTitle").find("option").attr("selected",!1);$("#ddlSrchTitle").val("").trigger("chosen:updated");$("#ddlSrchDirector").find("option").attr("selected",!1);$("#ddlSrchDirector").val("").trigger("chosen:updated");$("#ddlSrchLicensor").find("option").attr("selected",!1);$("#ddlSrchLicensor").val("").trigger("chosen:updated");showLD="Y";LoadDeals(0,"N","Y")}function SetMaxDt(){setMinMaxDates("txtfrom","",$("#txtto").val())}function SetMinDt(){setMinMaxDates("txtto",$("#txtfrom").val(),"")}function ClearAll(){$("#hdnClearAll").val("Y");$("#txtSrchDealNo").val("");$("#txtfrom").val("");$("#txtto").val("");$("#ddlSrchDealType").val(0);$("#ddlSrchDealTag").val(0);$("#ddlWorkflowStatus").val("0");$("#ddlSrchBU").val($("#ddlSrchBU option:first-child").val());OnChangeBindTitle();$("#ddlSrchTitle").find("option").attr("selected",!1);$("#ddlSrchTitle").val("").trigger("chosen:updated");$("#chkSubDeal").prop("checked","checked");$("#ddlSrchDirector").find("option").attr("selected",!1);$("#ddlSrchDirector").val("").trigger("chosen:updated");$("#ddlSrchLicensor").find("option").attr("selected",!1);$("#ddlSrchLicensor").val("").trigger("chosen:updated");showLD="Y";LoadDeals(0,"N","Y");$("#divSearch").show()}function OnChangeBindTitle(){var n=$("#ddlSrchDealType").val(),t=$("#ddlSrchBU").val();$("#ddlSrchTitle").find("option").attr("selected",!1);$("#ddlSrchTitle").val("").trigger("chosen:updated");$.ajax({type:"POST",url:URL_OnChangeBindTitle,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({dealTypeCode:n,BUCode:t}),async:!1,success:function(n){n=="true"?redirectToLogin():($("#ddlSrchTitle").empty(),$(n).each(function(){$("#ddlSrchTitle").append($("<option>").val(this.Value).text(this.Text))}),$("#ddlSrchTitle").val("").trigger("chosen:updated"))},error:function(n){alert("Error: "+n.responseText)}});(n==Deal_Type_Content||n==Deal_Type_Format_Program||n==Deal_Type_Event||n==Deal_Type_Documentary_Show||n==Deal_Type_Sports)&&$("#chkSubDeal").removeAttr("checked")}function handleOk(){if(Command_Name=="TERMINATION"){Command_Name="";LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N");return}showLoading();Command_Name=="Approve"?$.ajax({type:"POST",url:URL_Approve,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Acq_Deal_Code:tmpAcqDealCode,IsZeroWorkFlow:tmp_IsZeroWorkFlow}),async:!1,success:function(n){if(hideLoading(),n=="true")redirectToLogin();else if(n.RedirectTo=="Index")n.Error==""?(showLD="N",n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,""),LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N")):showAlert("E",n.Error,"");else if(n.RedirectTo=="View"){var t=URL_Index;t=t.replace("Acq_Deal_Code",parseInt(tmpAcqDealCode));window.location.href=t}else return Show_Validation_Popup("",10,0),!1},error:function(n){alert("Error: "+n.responseText)}}):Command_Name=="SendForAuth"?$.ajax({type:"POST",url:URL_SendForAuthorisation,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Acq_Deal_Code:tmpAcqDealCode}),async:!1,success:function(n){if(hideLoading(),n=="true")redirectToLogin();else if(n.RedirectTo!="")n.RedirectTo=="Index"?(showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N"),n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,"")):Show_Validation_Popup("",10,0);else return showAlert("E",n.Message),!1},error:function(n){alert("Error: "+n.responseText)}}):Command_Name=="Delete"?DeleteDeal():Command_Name=="Rollback"?RollbackDeal():Command_Name=="RollbackWOApprove"&&RollbackWOApp()}function handleCancel(){}function Show_Validation_Popup(n,t,i){hideLoading();$.ajax({type:"POST",url:URL_Show_Validation_Popup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({searchForTitles:n,PageSize:t,PageNo:i}),async:!1,success:function(n){n=="true"?redirectToLogin():$("#BindValidationPopup").html(n)},error:function(n){alert("Error: "+n.responseText)}});$("#popupValidationError").modal();initializeChosen();initializeExpander()}function DeleteDeal(){showLoading();$.ajax({type:"POST",url:URL_DeleteDeal,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Acq_Deal_Code:tmpAcqDealCode}),success:function(n){hideLoading();n=="true"?redirectToLogin():(showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N"),n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,""))},error:function(n){alert("Error: "+n.responseText)}})}function RollbackDeal(){showLoading();$.ajax({type:"POST",url:URL_Rollback,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Acq_Deal_Code:tmpAcqDealCode}),success:function(n){hideLoading();n=="true"?redirectToLogin():(showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N"),n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,""))},error:function(n){alert("Error: "+n.responseText)}})}function RollbackWOApp(){showLoading();$.ajax({type:"POST",url:URL_RollbackWOApp,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Acq_Deal_Code:tmpAcqDealCode}),success:function(n){hideLoading();n=="true"?redirectToLogin():(showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N"),n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,""))},error:function(n){alert("Error: "+n.responseText)}})}function Ask_Confirmation(n,t,i){tmpAcqDealCode=t;Command_Name=n;tmp_IsZeroWorkFlow=i;n=="Delete"?showAlert("I","Are you sure, you want to delete this record?","OKCANCEL"):n=="Rollback"?showAlert("I","Are you sure, you want to rollback this record?","OKCANCEL"):n=="Approve"?showAlert("I","Are you sure, you want to approve this deal?","OKCANCEL"):n=="SendForAuth"?showAlert("I","Are you sure, you want to send this deal for approval?","OKCANCEL"):n=="RollbackWOApprove"&&showAlert("I","Are you sure, you want to rollback this record?","OKCANCEL")}function CommonSrch(){$("#srchCommon").val()==""&&$("#hdnClearAll").val("Y");showLD="N";LoadDeals(0,"N","N")}function TerminateDeal(n,t,i){showLoading();$.ajax({type:"POST",url:URL_ValidateTermination,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({dealCode:n}),async:!0,success:function(r){r=="true"?redirectToLogin():r.Status=="E"?showAlert("E",r.Message):r.Status=="S"&&OpenTerminationPopup(n,t,i)},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function OpenTerminationPopup(n,t,i){showLoading();$.ajax({type:"POST",url:URL_OpenTerminationPopup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({dealCode:n,dealTypeCode:t,agreementNo:i}),async:!0,success:function(n){n=="true"?redirectToLogin():($("#popupTermination").empty(),$("#popupTermination").html(n),$("#popupTermination").modal(),AssignJQuery())},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function SaveTermination(n,t){var u,s;$(".required").removeClass("required");var f=[],r=[],o=$("#tblTermination .trFullRow"),i=!0,e="N";o.each(function(){var y=0,u=0,s="",h,p,d,w,g,l,a,nt,tt,v,c,b,k,o;if(y=parseInt($(this).find("span[id*='lblTitleCode_']").text()),l=$(this).find("span[id*='lblMinDate_']").text(),a=$(this).find("span[id*='lblMaxDate_']").text(),l=MakeDateFormate(l),a=MakeDateFormate(a),nt=new Date(l),tt=new Date(a),$(this).find("input[id*='txtTerminateEpisodeNo_'][type='text']")[0]!=undefined&&(h=$(this).find("input[id*='txtTerminateEpisodeNo_'][type='text']")[0],u=h.value,w=parseInt($(this).find("span[id*='lblSchEpsNo_']").text()),p=parseInt($(this).find("span[id*='lblSynEpsNo_']").text())),c=$(this).find("input[id*='txtTerminationFrom_'][type='text']")[0],u!=""&&(u=parseInt(u)),s=c.value,v=new Date(MakeDateFormate(s)),d=new Date($(this).find("span[id*='lblSynEndDate_']").text()),g=new Date($(this).find("span[id*='lblSchEndDate_']").text()),b=parseInt($(this).find("span[id*='lblMinEpisode_']").text()),k=parseInt($(this).find("span[id*='lblMaxEpisode_']").text()),$.trim(u)==""&&$.trim(s)=="")return $("#"+h.id).attr("required",!0),i=!1,!1;if($.trim(s)==""&&$(this).find("input[id*='txtTerminateEpisodeNo_'][type='text']")[0]==undefined)return $("#"+c.id).attr("required",!0),i=!1,!1;if(u!=""&&(u<b||u>k))return i=!1,showAlert("E","Please select episode no. between "+b+" To "+k,h.id),!1;if($(".trFullRow td:nth(1)").html()==""&&$(".trFullRow td:nth(2)").html()=="")return i=!1,showAlert("E","Please set Milestone start date first"),!1;if(v<nt||v>tt)return i=!1,showAlert("E","Please select termination date between "+l+" To "+a,c.id),!1;if(u<w&&u>0||g>v)return o="Date",t==DealProgram_G&&(o="Episode No / Date"),i=!1,u!=""&&u<w?showAlert("E","Termination "+o+" must be greater than or equal to Scheduled "+o,h.id):showAlert("E","Termination "+o+" must be greater than or equal to Scheduled "+o,c.id),!1;(u<p&&u>0||d>v)&&(o="Date",t==DealProgram_G&&(o="Episode No / Date"),i=!0,u!=""&&u<p?showAlert("E","Termination "+o+" must be greater than or equal to Syndicated "+o,h.id):showAlert("E","Termination "+o+" must be greater than or equal to Syndicated "+o,c.id),$(this).addClass("synerror"),e="Y",r.push({Deal_Code:n,Title_Code:y==0?null:y,Termination_Episode_No:u,Termination_Date:s}));i&&f.push({Deal_Code:n,Title_Code:y,Termination_Episode_No:u,Termination_Date:s})});i&&(showLoading(),Command_Name="TERMINATION",u=$("#tblTermination"),s=$(u).find(".synerror"),$.ajax({type:"POST",url:URL_SaveTermination,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({titleList:r.length>0?r:f,Syn_Error_Body:"",Is_Validate_Error:e}),async:!0,success:function(n){if($(u).find(".synerror").removeClass("synerror"),n=="true")hideLoading(),redirectToLogin();else{if(hideLoading(),n.Status=="E")return!1;n.Status=="S"&&($("#popupTermination").modal("hide"),showAlert("S",n.Message,"OK"))}},error:function(n){hideLoading();alert("Error: "+n.responseText)}}))}function ShowTerminateError(){$.ajax({type:"POST",url:URL_ShowTerminateError,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({}),async:!0,success:function(n){n=="true"?redirectToLogin():($("#popupTerminationError").empty(),$("#popupTerminationError").html(n),$("#popupTerminationError").modal())},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function BindDealStatusPopup(n){showLoading();$.ajax({type:"POST",url:URL_PartialBindDealStatusPopup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify({Acq_Deal_Code:n}),success:function(n){n=="true"?redirectToLogin():$("#bindDealStatus").html(n)},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function BindMilestonePopup(n){showLoading();$.ajax({type:"POST",url:URL_PartialBindMilestonePopup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify({Acq_Deal_Code:n}),success:function(n){n=="true"&&redirectToLogin();n.indexOf("This record")>-1?showAlert("e",n):($("#BindMilestonePopup").html(n),$("#popSetMileStone").modal(),initializeDatepicker())},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function SetPaging(){var t,i,n;IsCall="N";PageNo_PVG!=null&&(t=PageNo_PVG);RecordCount_PVG!=null&&(i=RecordCount_PVG);t=t-1;n={callback:pageselectCallback};n.items_per_page=10;n.num_display_entries=5;n.num=10;n.prev_text="<<";n.next_text=">>";n.current_page=t;$(".pagination").pagination(i,n)}function pageselectCallback(n){IsCall=="Y"?LoadDeals(n,isAdvanced_G,"N"):IsCall="Y"}$(document).ready(function(){MsgType_G!=null&&MsgType_G!=""&&MsgType_G=="S"?msg_G!=null&&msg_G!=""&&showAlert("S",msg_G):msg_G!=null&&msg_G!=""&&showAlert("e",msg_G);RLCode_G!=""&&Call_RefreshRecordReleaseTime(RLCode_G);IncludeSubDeal_Search_G!="undefined"&&IncludeSubDeal_Search_G=="N"&&$("#chkSubDeal").removeAttr("checked");ReleaseRecord_G!=""&&ReleaseRecordLock();tmp_IsAdvanced=isAdvanced_G;tmp_IsAdvanced==""&&(tmp_IsAdvanced="N");showLD="Y";fullyLoaded=="Y"&&(fullyLoaded="N",LoadDeals(PageNo_G,tmp_IsAdvanced,"Y"),fullyLoaded="Y");$("#srchCommon").focus();tmp_IsAdvanced=="N"&&$("#divSearch").hide();$("#txtfrom").change(function(){SetMinDt()});$("#txtto").change(function(){SetMaxDt()})});var showLD="Y";
//# sourceMappingURL=Acq_Deal_List.min.js.map
