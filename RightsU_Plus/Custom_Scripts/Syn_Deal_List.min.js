function BindAdvanced_Search_Controls(n){n=="BTC"&&$("#divSearch").slideToggle(400);var t=!0;tmp_IsAdvanced=="Y"&&(t=!1);parseInt($("#ddlSrchBU option").length)==0&&$.ajax({type:"POST",url:URL_BindAdvanced_Search_Controls,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Is_Bind_Control:!0}),async:t,success:function(n){if(n=="true")redirectToLogin();else{$(n.USP_Result).each(function(){(this.Data_For=="DTP"||this.Data_For=="DTC")&&$("#ddlSrchDealType").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="DTG"&&$("#ddlSrchDealTag").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="BUT"&&$("#ddlSrchBU").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="TIT"&&$("#ddlSrchTitle").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="DIR"&&$("#ddlSrchDirector").append($("<option>").val(this.Display_Value).text(this.Display_Text));this.Data_For=="LAV"&&$("#ddlSrchLicensor").append($("<option>").val(this.Display_Value).text(this.Display_Text))});var t=$(n.Obj_Acq_Syn_List_Search);$("#ddlSrchDealType").val(t[0].DealType_Search).attr("selected","true").trigger("chosen:updated");$("#ddlSrchDealTag").val(t[0].Status_Search).attr("selected","true").trigger("chosen:updated");$("#ddlSrchBU").val(t[0].BUCodes_Search).attr("selected","true").trigger("chosen:updated");$("#ddlSrchTitle").val(t[0].TitleCodes_Search.split(",")).attr("selected","true").trigger("chosen:updated");$("#ddlSrchDirector").val(t[0].DirectorCodes_Search.split(",")).attr("selected","true").trigger("chosen:updated");$("#ddlSrchLicensor").val(t[0].ProducerCodes_Search.split(",")).attr("selected","true").trigger("chosen:updated")}},error:function(n){alert("Error: "+n.responseText)}})}function Show_Error_Popup(n,t,i,r){showLoading();var u=$("#ddlErrorType").val();$("#hdnSynDealCode").val(r);$.ajax({type:"POST",url:URL_Show_Error_Popup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({searchForTitles:n,PageSize:t,PageNo:i,SynDealCode:r,ErrorMsg:u}),async:!1,success:function(n){n=="true"?redirectToLogin():$("#BindErrorPopup").html(n)},error:function(n){alert("Error: "+n.responseText)}});$("#popupShowError").modal();initializeExpander();initializeChosen();setChosenWidth("#lbTitle_ErrorPopup","84%");u!=null&&$("#ddlErrorType").val(u);$("#ddlErrorType").trigger("chosen:updated");hideLoading()}function LoadDeals(n,t){showLD=="Y"&&showLoading();var i="",r="",u="";tmp_pageNo=n;tmp_IsAdvanced=t;t=="N"?$("#divSearch").hide():t=="Y"&&parseInt($("#ddlSrchBU option").length)==0&&BindAdvanced_Search_Controls("PGL");$("#ddlSrchTitle").val()&&(i=$("#ddlSrchTitle").val().join(","));$("#ddlSrchDirector").val()&&(r=$("#ddlSrchDirector").val().join(","));$("#ddlSrchLicensor").val()&&(u=$("#ddlSrchLicensor").val().join(","));$.ajax({type:"POST",url:URL_PartialDealList,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",dataType:"html",async:!0,data:JSON.stringify({Page:n,commonSearch:$("#srchCommon").val(),isTAdvanced:t,strDealNo:$("#txtSrchDealNo").val(),strfrom:$("#txtfrom").val(),strto:$("#txtto").val(),strSrchDealType:$("#ddlSrchDealType").val(),strSrchDealTag:$("#ddlSrchDealTag").val(),strWorkflowStatus:$("#ddlWorkflowStatus").val(),strTitles:i,strDirector:r,strLicensor:u,strBU:$("#ddlSrchBU").val(),strShowAll:ShowAll,ClearSession:$("#hdnClearAll").val()}),success:function(n){n=="true"?redirectToLogin():($("#dvDealList").html(n),$("[title]").tooltip(),initializeExpander(),showLD=="Y"&&hideLoading())},error:function(){hideLoading();alert("Sorry, it seems we have some issue. Please try again later.")}})}function validateSearch(){var n="",t="",i="";$("#srchCommon").val("");$("#hdnClearAll").val("N");$("#ddlSrchTitle").val()&&(n=$("#ddlSrchTitle").val().join(","));$("#ddlSrchDirector").val()&&(t=$("#ddlSrchDirector").val().join(","));$("#ddlSrchLicensor").val()&&(i=$("#ddlSrchLicensor").val().join(","));var r=$("#txtSrchDealNo").val(),u=$("#txtfrom").val(),f=$("#txtto").val(),e=$("#ddlSrchDealTag").val(),o=$("#ddlSrchBU").val(),s=$("#ddlSrchDealType").val();if(r==""&&u==""&&f==""&&i==""&&t==""&&n==""&&e<"0"&&o<"0"&&s<"0")return showAlert("e","Please select/enter search criteria"),!1;showLD="Y";LoadDeals(0,"Y","N")}function ShowAll(){$("#divSearch").hide();$("#srchCommon").val("");$("#hdnClearAll").val("N");$("#txtSrchDealNo").val("");$("#chkSubDeal").prop("checked","checked");$("#txtfrom").val("");$("#txtto").val("");$("#ddlSrchDealType").val(0);$("#ddlSrchDealTag").val(0);$("#ddlWorkflowStatus").val("0");$("#ddlSrchBU").val($("#ddlSrchBU option:first-child").val());OnChangeBindTitle();$("#ddlSrchTitle").find("option").attr("selected",!1);$("#ddlSrchTitle").val("").trigger("chosen:updated");$("#ddlSrchDirector").find("option").attr("selected",!1);$("#ddlSrchDirector").val("").trigger("chosen:updated");$("#ddlSrchLicensor").find("option").attr("selected",!1);$("#ddlSrchLicensor").val("").trigger("chosen:updated");showLD="Y";LoadDeals(0,"N","Y")}function ClearAll(){$("#hdnClearAll").val("Y");$("#txtSrchDealNo").val("");$("#txtfrom").val("");$("#txtto").val("");$("#ddlSrchDealType").val(0);$("#ddlSrchDealTag").val(0);$("#ddlWorkflowStatus").val("0");$("#ddlSrchBU").val($("#ddlSrchBU option:first-child").val());OnChangeBindTitle();$("#ddlSrchTitle").find("option").attr("selected",!1);$("#ddlSrchTitle").val("").trigger("chosen:updated");$("#ddlSrchDirector").find("option").attr("selected",!1);$("#ddlSrchDirector").val("").trigger("chosen:updated");$("#ddlSrchLicensor").find("option").attr("selected",!1);$("#ddlSrchLicensor").val("").trigger("chosen:updated");showLD="Y";LoadDeals(0,"N","Y");$("#divSearch").show()}function SetMaxDt(){setMinMaxDates("txtfrom","",$("#txtto").val())}function SetMinDt(){setMinMaxDates("txtto",$("#txtfrom").val(),"")}function OnChangeBindTitle(){var n=$("#ddlSrchDealType").val(),t=$("#ddlSrchBU").val();$("#ddlSrchTitle").find("option").attr("selected",!1);$("#ddlSrchTitle").val("").trigger("chosen:updated");$.ajax({type:"POST",url:URL_OnChangeBindTitle,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({dealTypeCode:n,BUCode:t}),async:!0,success:function(n){n=="true"?redirectToLogin():($("#ddlSrchTitle").empty(),$(n).each(function(){$("#ddlSrchTitle").append($("<option>").val(this.Value).text(this.Text))}),$("#ddlSrchTitle").val("").trigger("chosen:updated"))},error:function(n){alert("Error: "+n.responseText)}})}function handleOk(){if(Command_Name=="TERMINATION"){Command_Name="";LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N");return}showLoading();Command_Name=="Approve"?$.ajax({type:"POST",url:URL_Approve,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Syn_Deal_Code:tmpSynDealCode,IsZeroWorkFlow:tmp_IsZeroWorkFlow}),async:!1,success:function(n){if(hideLoading(),n=="true")redirectToLogin();else if(n.RedirectTo=="Index")n.Error==""?(showLD="N",n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,""),LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N")):showAlert("E",n.Error,"");else if(n.RedirectTo=="View"){var t=URL_Index;t=t.replace("Syn_Deal_Code",parseInt(tmpSynDealCode));window.location.href=t}else return ShowValidationPopup("",10,0),!1},error:function(n){alert("Error: "+n.responseText)}}):Command_Name=="SendForAuth"?$.ajax({type:"POST",url:URL_SendForAuthorisation,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Syn_Deal_Code:tmpSynDealCode}),async:!1,success:function(n){if(hideLoading(),n=="true")redirectToLogin();else if(n.RedirectTo!="")n.RedirectTo=="Index"?(showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N"),n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,"")):ShowValidationPopup("",10,0);else return showAlert("e",n.Message),!1},error:function(n){alert("Error: "+n.responseText)}}):Command_Name=="Delete"?DeleteDeal():Command_Name=="Rollback"&&RollbackDeal()}function handleCancel(){}function Reprocess(){showLoading();$.ajax({type:"POST",url:URL_Reprocess,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Syn_Deal_Code:$("#hdnSynDealCode").val()}),async:!1,success:function(n){if(hideLoading(),n=="true")redirectToLogin();else{if($("#popupShowError").modal("hide"),$(".modal-backdrop").hide(),$(".modal-open").removeClass("modal-open"),n.RedirectTo!="")showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N");else return!1;n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,"")}},error:function(n){$("#popupShowError").modal("hide");$(".modal-backdrop").hide();$(".modal-open").removeClass("modal-open");showAlert("e",n.responseText)}})}function DeleteDeal(){showLoading();$.ajax({type:"POST",url:URL_DeleteDeal,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Syn_Deal_Code:tmpSynDealCode}),success:function(n){hideLoading();n=="true"?redirectToLogin():(showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N"),n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,""))},error:function(n){alert("Error: "+n.responseText)}})}function RollbackDeal(){showLoading();$.ajax({type:"POST",url:URL_Rollback,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Syn_Deal_Code:tmpSynDealCode}),success:function(n){hideLoading();n=="true"?redirectToLogin():(showLD="N",LoadDeals(tmp_pageNo,tmp_IsAdvanced,"N"),n.strMsgType!=null&&n.strMsgType!=""&&n.strMsgType=="S"?n.Message!=""&&showAlert("S",n.Message,""):n.Message!=""&&showAlert("E",n.Message,""))},error:function(n){alert("Error: "+n.responseText)}})}function Ask_Confirmation(n,t,i){tmpSynDealCode=t;Command_Name=n;tmp_IsZeroWorkFlow=i;n=="Delete"?showAlert("I","Are you sure, you want to delete this record?","OKCANCEL"):n=="Rollback"?showAlert("I","Are you sure, you want to rollback this record?","OKCANCEL"):n=="Approve"?showAlert("I","Are you sure, you want to approve this deal?","OKCANCEL"):n=="SendForAuth"&&showAlert("I","Are you sure, you want to send this deal for approval?","OKCANCEL")}function CommonSrch(){$("#srchCommon").val()==""&&$("#hdnClearAll").val("Y");showLD="N";LoadDeals(0,"N","N")}function TerminateDeal(n,t,i){showLoading();$.ajax({type:"POST",url:URL_ValidateTermination,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({dealCode:n}),async:!0,success:function(r){r=="true"?redirectToLogin():r.Status=="E"?showAlert("E",r.Message):r.Status=="S"&&OpenTerminationPopup(n,t,i)},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function OpenTerminationPopup(n,t,i){showLoading();$.ajax({type:"POST",url:URL_OpenTerminationPopup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({dealCode:n,dealTypeCode:t,agreementNo:i}),async:!0,success:function(n){n=="true"?redirectToLogin():($("#popupTermination").empty(),$("#popupTermination").html(n),$("#popupTermination").modal(),AssignJQuery())},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function SaveTermination(n,t){$(".required").removeClass("required");var r=[],f=$("#tblTermination .trFullRow"),u=dealProgram_G,e=dealMovie_G,i=!0;f.each(function(){var b=0,f=0,l="",o,s,k,d,y,h,c,a,p,w,v;if(b=parseInt($(this).find("span[id*='lblTitleCode_']").text()),o=$(this).find("span[id*='lblMinDate_']").text(),s=$(this).find("span[id*='lblMaxDate_']").text(),o=MakeDateFormate(o),s=MakeDateFormate(s),k=new Date(o),d=new Date(s),h="",c="",t==u&&(a=$(this).find("input[id*='txtTerminateEpisodeNo_'][type='text']")[0],f=a.value,p=parseInt($(this).find("span[id*='lblMinEpisode_']").text()),w=parseInt($(this).find("span[id*='lblMaxEpisode_']").text()),$.trim(f)==""?h=a.id:f=parseInt(f),(f<p||f>w)&&h==""))return i=!1,showAlert("E","Please select episode no. between "+p+" To "+w,a.id),!1;if(v=$(this).find("input[id*='txtTerminationFrom_'][type='text']")[0],l=v.value,$.trim(l)=="")c=v.id;else if(y=new Date(MakeDateFormate(l)),y<k||y>d)return i=!1,showAlert("E","Please select termination date between "+o+" To "+s,v.id),!1;if(h!=""&&c!=""&&t==u)return i=!1,showAlert("E","Please select either Episode No. or Termination Date",h),!1;if(c!=""&&t==e)return i=!1,showAlert("E","Please select Termination Date",c),!1;i&&r.push({Deal_Code:n,Title_Code:b,Termination_Episode_No:f,Termination_Date:l})});i&&(Command_Name="TERMINATION",showLoading(),$.ajax({type:"POST",url:URL_SaveTermination,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({titleList:r}),async:!0,success:function(n){n=="true"?(hideLoading(),redirectToLogin()):(hideLoading(),n.Status=="E"?showAlert("E",n.Message):n.Status=="S"&&($("#popupTermination").modal("hide"),showAlert("S",n.Message,"OK")))},error:function(n){hideLoading();alert("Error: "+n.responseText)}}))}function SetPaging(){var t,i,n;IsCall="N";PageNo_PVG!=null&&(t=PageNo_PVG);RecordCount_PVG!=null&&(i=RecordCount_PVG);t=t-1;n={callback:pageselectCallback};n.items_per_page=10;n.num_display_entries=5;n.num=10;n.prev_text="<<";n.next_text=">>";n.current_page=t;$(".pagination").pagination(i,n)}function BindDealStatusPopup(n){showLoading();$.ajax({type:"POST",url:URL_PartialBindDealStatusPopup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify({Syn_Deal_Code:n}),success:function(n){n=="true"?redirectToLogin():$("#bindDealStatus").html(n)},error:function(n){alert("Error: "+n.responseText)}});hideLoading()}function pageselectCallback(n){IsCall=="Y"?LoadDeals(n,tmp_IsAdvanced,"N"):IsCall="Y"}$(document).ready(function(){var n=pageNo_G;MsgType_G!=null&&MsgType_G!=""&&MsgType_G=="S"?msg_G!=null&&msg_G!=""&&showAlert("S",msg_G):msg_G!=null&&msg_G!=""&&showAlert("e",msg_G);RLCode_G!=""&&Call_RefreshRecordReleaseTime(RLCode_G);ReleaseRecord!=""&&ReleaseRecordLock();tmp_IsAdvanced==""&&(tmp_IsAdvanced="N");showLD="Y";fullyLoaded=="Y"&&(fullyLoaded="N",LoadDeals(n,tmp_IsAdvanced,"Y"),fullyLoaded="Y");$("#srchCommon").focus();tmp_IsAdvanced=="N"&&$("#divSearch").hide();$("#txtfrom").change(function(){SetMinDt()});$("#txtto").change(function(){SetMaxDt()})});
/*
//# sourceMappingURL=Syn_Deal_List.min.js.map
*/