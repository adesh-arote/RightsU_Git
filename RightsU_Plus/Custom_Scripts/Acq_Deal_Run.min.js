function DealType(e) { "1" == e.value && (document.getElementById("subDealMovie").style.display = "", document.getElementById("movieSearchBand").style.display = "", document.getElementById("optDealFor").style.display = "", document.getElementById("optDealFor2").style.display = "none"), "2" == e.value && (document.getElementById("subDealMovie").style.display = "none", document.getElementById("movieSearchBand").style.display = "none", document.getElementById("optDealFor").style.display = "none", document.getElementById("optDealFor2").style.display = "") } function ModeAcquisition(e) { "1" == e.value && (document.getElementById("showAcquisition").innerHTML = ShowMessage.lblForAssignor), "2" == e.value && (document.getElementById("showAcquisition").innerHTML = ShowMessage.lblForLicensor), "3" == e.value && (document.getElementById("showAcquisition").innerHTML = ShowMessage.lblForProducerLineProducer) } function DealFor(e) { "1" == e.value && (document.getElementById("subDealMovie").style.display = "", document.getElementById("movieSearchBand").style.display = "", document.getElementById("subDealProgram").style.display = "none", document.getElementById("ProgramSearchBand").style.display = "none", document.getElementById("ddlOtherFor").disabled = !1), "2" == e.value && (document.getElementById("subDealMovie").style.display = "none", document.getElementById("movieSearchBand").style.display = "none", document.getElementById("subDealProgram").style.display = "", document.getElementById("ProgramSearchBand").style.display = "", document.getElementById("ddlOtherFor").disabled = !1), "3" == e.value && (document.getElementById("subDealMovie").style.display = "none", document.getElementById("movieSearchBand").style.display = "none", document.getElementById("subDealProgram").style.display = "none", document.getElementById("ProgramSearchBand").style.display = "none", document.getElementById("ddlOtherFor").disabled = !0) } function showOverflow(e) { ("1" == e.value || "3" == e.value) && (document.getElementById("RevenueSharing").style.display = "none"), "2" == e.value && (document.getElementById("RevenueSharing").style.display = "") } function showLimited2(e) { "C" == e.value ? ($("input[name=Is_Yearwise_Definition]").prop("disabled", ""), $("input[name=Is_Prime_OffPrime_Defn]").prop("disabled", ""), document.getElementById("addLimited2").style.display = "", document.getElementById("lblAddLimited").style.display = "", document.getElementById("addSynRun").style.display = "", document.getElementById("lbladdNoRun").style.display = "", document.getElementById("addNoRun").style.display = "", document.getElementById("lbladdSynRun").style.display = "", document.getElementById("addLimited2").readOnly = !0, CheckSubLicen(), CalculateActualRun()) : "U" == e.value && (document.getElementById("addSynRun").value = "0", document.getElementById("addLimited2").style.display = "none", document.getElementById("lblAddLimited").style.display = "none", document.getElementById("addSynRun").style.display = "none", document.getElementById("lbladdNoRun").style.display = "none", document.getElementById("addNoRun").style.display = "none", document.getElementById("lbladdSynRun").style.display = "none", $("#addLimited2").val(""), $('input[name=Is_Yearwise_Definition][value="N"]').prop("checked", !0), $("input[name=Is_Yearwise_Definition]").prop("disabled", "disabled"), document.getElementById("addrunsDef2").style.display = "none", $('input[name=Is_Prime_OffPrime_Defn][value="N"]').prop("checked", !0), $("input[name=Is_Prime_OffPrime_Defn]").prop("disabled", "disabled"), document.getElementById("rowPrime1").style.display = "none", document.getElementById("rowPrime2").style.display = "none", $("#addrunsDef2").html(""), $("#addLimited2").removeAttr("required"), $("#hdnIs_Yearwise_Definition").val("N")) } function CheckSubLicen() { if ("C" == $("input[name=Run_Type]:checked").val()) { var e = ""; null != $("#ddlPTitle").val() && (e = $("#ddlPTitle").val().join(",")), "" != e && $.ajax({ type: "POST", url: URL_CheckSubLicen, traditional: !0, async: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", data: JSON.stringify({ TitleCodes: e }), success: function (e) { "False" == e ? (document.getElementById("addSynRun").value = "0", document.getElementById("addSynRun").style.display = "none", document.getElementById("lbladdNoRun").style.display = "none", document.getElementById("addNoRun").style.display = "none", document.getElementById("lbladdSynRun").style.display = "none", document.getElementById("addLimited2").readOnly = !1) : (document.getElementById("addSynRun").style.display = "", document.getElementById("lbladdNoRun").style.display = "", document.getElementById("addNoRun").style.display = "", document.getElementById("lbladdSynRun").style.display = "", document.getElementById("addLimited2").readOnly = !0) }, error: function (e) { alert("Error: " + e.responseText) } }) } } function CalculateActualRun() { var e = 0, t = 0; "" != $("#addNoRun").val() && (e = parseInt($("#addNoRun").val())), "" != $("#addSynRun").val() && (t = parseInt($("#addSynRun").val())); var n = 0; e > t ? (n = e - t, $("#addLimited2").val(n)) : $("#addLimited2").val("0") } function showrunsDefinition2(e) { if ($("#hdnIs_Yearwise_Definition").val(e.value), "Y" == e.value) { showLoading(); var t = ""; null != $("#ddlPTitle").val() ? "" != $("#addLimited2").val() ? (t = $("#ddlPTitle").val().join(","), $.ajax({ type: "POST", url: URL_GetYearWiseRun, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", data: JSON.stringify({ TitleCodes: t, txtNoOfRun: $("#addLimited2").val() }), success: function (e) { "true" == e && redirectToLogin(), "Invalid" == $.trim(e) || "" == $.trim(e) ? (showAlert("E", ShowMessage.invalidTitleRun), $('input[name=Is_Yearwise_Definition][value="N"]').prop("checked", !0), $("#hdnIs_Yearwise_Definition").val("N")) : ($("#addrunsDef2").html(e), $(".numbertext").numeric({ allowMinus: !1, allowThouSep: !1, allowDecSep: !1, maxPreDecimalPlaces: 5, maxDecimalPlaces: 0 }), document.getElementById("addrunsDef2").style.display = ""), hideLoading() }, error: function (e) { } })) : (showAlert("E", ShowMessage.lblForNoOfExhibition), $('input[name=Is_Yearwise_Definition][value="N"]').prop("checked", !0), hideLoading()) : (showAlert("E", ShowMessage.lblForSelectTitle), $('input[name=Is_Yearwise_Definition][value="N"]').prop("checked", !0), hideLoading()) } else "N" == e.value && ($("#addrunsDef2").html(""), document.getElementById("addrunsDef2").style.display = "none") } function getFormattedDate(e) { var t = /(.*?)\/(.*?)\/(.*?)$/, n = e.replace(t, function (e, t, n, i) { var l = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; return (10 > n ? "0" + n : n) + " " + l[t - 1] + " " + i }); return n } function bindRuleRecord(e) { Number(e.value) > 0 ? (showLoading(), $.ajax({ type: "POST", url: URL_GetRightRule, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", async: !0, data: JSON.stringify({ RightRuleCode: e.value }), success: function (e) { "true" == e && redirectToLogin(), e.length > 0 && ($("#txtDayStartTime").val(e[0].Start_Time), $("#txtPlaysperday").val(e[0].Play_Per_Day), $("#txtDurationofDay").val(e[0].Duration_Of_Day), $("#txtNoofRepeat").val(e[0].No_Of_Repeat), hideLoading()) }, error: function (e) { } }), $("#Right_Rule_Code").val(e.value)) : $("#txtDayStartTime").value = $("#txtPlaysperday").value = $("#txtDurationofDay").value = $("#txtNoofRepeat").value = "" } function showRules2(e) { showLoading(); for (var t = 1; 8 > t; t++) "Y" == e.value ? (document.getElementById("RuleEdit_" + t).style.display = "", $("select#ddlRuleRight.form_input.chosen-select").val("0").trigger("chosen:updated")) : "N" == e.value && (document.getElementById("RuleEdit_" + t).style.display = "none", $("#txtHrs2").val(""), $("#Right_Rule_Code").val(""), $("#txtDayStartTime").val(""), $("#txtPlaysperday").val(""), $("#txtDurationofDay").val(""), $("#txtNoofRepeat").val(""), $("input[name=chkDays]").prop("checked", !1), $("input[name=Repeat_Within_Days_Hrs][value=D]").prop("checked", !0), $("#ddlRuleRight").removeClass("required"), $("#txtHrs2").removeAttr("required")); hideLoading() } function showdays2(e) { showLoading(), "D" == e.value ? (document.getElementById("RuleEdit_7").style.display = "", $("#lblDaysHours")[0].innerHTML = "Days", $("#lblDaysHours")[0].innerText = "Days") : "H" == e.value && (document.getElementById("RuleEdit_7").style.display = "none", $("#lblDaysHours")[0].innerHTML = "Hrs", $("#lblDaysHours")[0].innerText = "Hrs", $("input[name=chkDays]").prop("checked", !1)), hideLoading() } function showChannel2(e) { $("#hdnIs_Channel_Definition_Rights").val(e.value), showLoading(), "Y" == e.value ? (document.getElementById("addChannel_edit").style.display = "", document.getElementById("addChannel2_edit").style.display = "") : "N" == e.value && (document.getElementById("addChannel_edit").style.display = "none", document.getElementById("addChannel2_edit").style.display = "none", $("input[name=Run_Definition_Type][value=N]").prop("checked", !0), $("#ddlPrimaryChannel option[value= 0]").attr("selected", "selected"), $("#ddlPrimaryChannel").trigger("chosen:updated"), $("select#lbChannel.form_input.chosen-select").val("").trigger("chosen:updated"), $("#showRundefinition2_1").html(""), $("#showRundefinition2_2").html(""), $("#showRundefinition2_3").html(""), $("#showRundefinition2_4").html(""), $("#showRundefinition2_5").html(""), $("#lbChannel").removeAttr("required")), hideLoading() } function showRunDifination2(e) { if ("C" == e.value ? (document.getElementById("showRundefinition2_1").style.display = "", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none") : "CS" == e.value ? (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none") : "A" == e.value ? (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none") : "S" == e.value ? (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "", document.getElementById("showRundefinition2_5").style.display = "none") : "N" == e.value && (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none"), "N" != e.value) { var t = ""; document.getElementById("rbChannel").checked ? t = document.getElementById("rbChannel").value : document.getElementById("rbChannelCategory").checked && (t = document.getElementById("rbChannelCategory").value), "C" == t ? null != $("#lbChannel").val() ? (showLoading(), $.ajax({ type: "POST", url: URL_PartialChannelList, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", data: JSON.stringify({ channelCodes: $("#lbChannel").val().join(","), channelDefinitionType: e.value, txtNoOfRun: $("#addLimited2").val(), ChannelCategoryChecked: t }), success: function (t) { "true" == t && redirectToLogin(), "C" == e.value ? ($("#showRundefinition2_1").html(t), $("#showRundefinition2_2").html(""), $("#showRundefinition2_3").html(""), $("#showRundefinition2_4").html("")) : "CS" == e.value ? ($("#showRundefinition2_1").html(""), $("#showRundefinition2_2").html(t), $("#showRundefinition2_3").html(""), $("#showRundefinition2_4").html("")) : "A" == e.value ? ($("#showRundefinition2_1").html(""), $("#showRundefinition2_2").html(""), $("#showRundefinition2_3").html(t), $("#showRundefinition2_4").html("")) : "S" == e.value && ($("#showRundefinition2_1").html(""), $("#showRundefinition2_2").html(""), $("#showRundefinition2_3").html(""), $("#showRundefinition2_4").html(t)), $(".numbertext").numeric({ allowMinus: !1, allowThouSep: !1, allowDecSep: !1, maxPreDecimalPlaces: 5, maxDecimalPlaces: 0 }), hideLoading() }, error: function (e) { alert("Error: " + e.responseText) } })) : ($("input[name=Run_Definition_Type][value=N]").prop("checked", !0), showAlert("E", ShowMessage.lblForSelectChannel), hideLoading()) : "G" == t && (0 != $("#lbChannelCluster").val() ? (showLoading(), $.ajax({ type: "POST", url: URL_PartialChannelList, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", data: JSON.stringify({ channelCodes: $("#lbChannelCluster").val(), channelDefinitionType: e.value, txtNoOfRun: $("#addLimited2").val(), ChannelCategoryChecked: t }), success: function (t) { "true" == t && redirectToLogin(), "C" == e.value ? ($("#showRundefinition2_1").html(t), $("#showRundefinition2_2").html(""), $("#showRundefinition2_3").html(""), $("#showRundefinition2_4").html("")) : "CS" == e.value ? ($("#showRundefinition2_1").html(""), $("#showRundefinition2_2").html(t), $("#showRundefinition2_3").html(""), $("#showRundefinition2_4").html("")) : "A" == e.value ? ($("#showRundefinition2_1").html(""), $("#showRundefinition2_2").html(""), $("#showRundefinition2_3").html(t), $("#showRundefinition2_4").html("")) : "S" == e.value && ($("#showRundefinition2_1").html(""), $("#showRundefinition2_2").html(""), $("#showRundefinition2_3").html(""), $("#showRundefinition2_4").html(t)), $(".numbertext").numeric({ allowMinus: !1, allowThouSep: !1, allowDecSep: !1, maxPreDecimalPlaces: 5, maxDecimalPlaces: 0 }), hideLoading() }, error: function (e) { alert("Error: " + e.responseText) } })) : ($("input[name=Run_Definition_Type][value=N]").prop("checked", !0), showAlert("E", ShowMessage.lblForSelectChannel), hideLoading())) } } function showPrime(e) { showLoading(), "Y" == e.value ? (document.getElementById("rowPrime1").style.display = "", document.getElementById("rowPrime2").style.display = "") : "N" == e.value && (document.getElementById("rowPrime1").style.display = "none", document.getElementById("rowPrime2").style.display = "none", $("#txtStartPrimeTime").val(""), $("#txtEndPrimeTime").val(""), $("#txtPrimeRun").val(""), $("#txtStartNPrimeTime").val(""), $("#txtEndNPrimeTime").val(""), $("#txtNPrimeRun").val("")), hideLoading() } function checkvalue(e, t) { e.checked ? $("#Acq_Deal_Run_Channel_" + t + "__Do_Not_Consume_Rights").val("Y") : $("#Acq_Deal_Run_Channel_" + t + "__Do_Not_Consume_Rights").val("N") } function ValidateSave() { $("[required='required']").removeAttr("required"), $(".required").removeClass("required"); var e = !0, t = ""; document.getElementById("rbChannel").checked ? t = document.getElementById("rbChannel").value : document.getElementById("rbChannelCategory").checked && (t = document.getElementById("rbChannelCategory").value); var n = 0; $("#tblYearWiseRun tr input[type=text]").each(function () { n += parseInt($(this).val()) }); var i = $("input[name=Is_Yearwise_Definition]:checked").val(), l = $("input[name=Run_Definition_Type]:checked").val(); if (void 0 == l && (showAlert("E", ShowMessage.lblForSelectRunDef), $("#divRunChannelDef").addClass("required"), e = !1), ("" == $("#ddlPTitle").val() || null == $("#ddlPTitle").val()) && ($("#divddlPTitle").addClass("required"), e = !1), "C" == $("input[name=Run_Type]:checked").val() && "" == $("#addLimited2").val() && ($("#addLimited2").attr("required", !0), e = !1), "C" == $("input[name=Run_Type]:checked").val() && "Y" == i && parseInt($("#addLimited2").val()) != parseInt(n) && (showAlert("E", ShowMessage.lblForSumOfYearwise), e = !1), "none" != document.getElementById("addSynRun").style.display && "none" != document.getElementById("addNoRun").style.display) { var a = 0, d = 0; "" != $("#addNoRun").val() && (a = parseInt($("#addNoRun").val())), "" != $("#addSynRun").val() && (d = parseInt($("#addSynRun").val())); d > a && (showAlert("E", ShowMessage.lblForSynRun), e = !1) } if ("Y" == $("input[name=Is_Rule_Right]:checked").val() && "0" == $("select#ddlRuleRight.form_input.chosen-select").val() ? ($("#ddlRuleRight").addClass("required"), e = !1) : $("#ddlRuleRight").removeClass("required"), "Y" == $("input[name=Is_Rule_Right]:checked").val() && "" == $("#txtHrs2").val() && ($("#txtHrs2").attr("required", !0), e = !1), "C" == t && "Y" == $("input[name=Is_Channel_Definition_Rights]:checked").val() && null == $("#lbChannel").val() && ($("#divlbChannel").addClass("required"), e = !1), "G" == t && "G" == $("input[name=Channel_Type]:checked").val() && "0" == $("#lbChannelCluster").val() && ($("#lbChannelCluster").addClass("required"), e = !1), e) if (checkChannelMinimum()) if (validateTitle()) if (ValidateTime()) if (validateDuplication()) { $("#hdnTitleList").val($("#ddlPTitle").val().join(",")); var o = ""; $("input[name=chkDays]:checked").each(function () { "" === o ? o += $(this).val() : o = o + "," + $(this).val() }), $("#hdnDays").val(o), showLoading(), e = !0 } else e = !1; else e = !1; else e = !1; else e = !1; return e } function ClearHidden() { clickedOnTab || $("#hdnTabName").val("") } function validateTitle() { if ("Y" == $("input[name=Is_Yearwise_Definition]:checked").val()) { var e = !0; $.ajax({ type: "POST", url: URL_ValidateTitleOnSave, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", async: !1, data: JSON.stringify({ Acq_Deal_Run_Code: acqDealRunCode_G, titleCodes: $("select#ddlPTitle.form_input.chosen-select").val().join(",") }), success: function (t) { if ("true" == t && redirectToLogin(), "Valid" == t) e = !0; else if (t == ShowMessage.lblForInvalidYearwiseRun) showAlert("E", t), e = !1; else if (t.length > 0) { var n = "<table class='table table-bordered table-hover'><thead><tr>"; n = n + "<th>" + ShowMessage.lblForTitle + "</th>", n = n + "<th>" + ShowMessage.lblForRightStartDate + "</th>", n = n + "<th>" + ShowMessage.lblForRightEndDate + "</th>", n = n + "<th>" + ShowMessage.lblForChannel + "</th></tr></thead><tbody>"; for (var i = 0; i < t.length; i++) { var l = new Date(parseInt(t[i].Rights_Start_Date.substr(6))), a = new Date(parseInt(t[i].Rights_End_Date.substr(6))), d = getFormattedDate(l.getMonth() + 1 + "/" + l.getDate() + "/" + l.getFullYear()), o = getFormattedDate(a.getMonth() + 1 + "/" + a.getDate() + "/" + a.getFullYear()); n += "<tr>", n = n + "<td>" + t[i].Title_Name + "</td>", n = n + "<td>" + d.toLocaleString("ar-AE") + "</td>", n = n + "<td>" + o + "</td>", n = n + "<td>" + t[i].CHANNEL_NAME + "</td></tr>" } n += "<tbody></table>", document.getElementById("lblConflictHeading").innerHTML = ShowMessage.lblForConflictCombination, $("#conflictRun").html(n), $("#popRunDefn").modal(), e = !1 } hideLoading() }, error: function (e) { alert("Error: " + e.responseText) } }) } else e = !0; return e } function validateDuplication() { var e = ""; document.getElementById("rbChannel").checked ? e = document.getElementById("rbChannel").value : document.getElementById("rbChannelCategory").checked && (e = document.getElementById("rbChannelCategory").value), showLoading(); var t = ""; "C" == e ? null != $("#lbChannel").val() && (t = $("#lbChannel").val().join(",")) : null != $("#lbChannelCluster").val() && (t = $("#lbChannelCluster").val()); var n = !0; return $.ajax({ type: "POST", url: URL_ValidateDuplication, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", async: !1, data: JSON.stringify({ Acq_Deal_Run_Code: acqDealRunCode_G, titleCodes: $("#ddlPTitle").val().join(","), IsYearWiseRunDefn: $("#hdnIs_Yearwise_Definition").val(), IsRuleRight: $("input[name=Is_Rule_Right]:checked").val(), IsChannelDefnRight: $("input[name=Is_Channel_Definition_Rights]:checked").val(), channelCodes: t, channelchecked: e }), success: function (e) { if ("true" == e && redirectToLogin(), "Valid" == e) n = !0; else if (e.length > 0) { var t = "<table class='table table-bordered table-hover'><thead><tr>"; t = t + "<th>" + ShowMessage.lblForTitle + "</th>", t = t + "<th>" + ShowMessage.lblForRightStartDate + "</th>", t = t + "<th>" + ShowMessage.lblForRightEndDate + "</th>", t = t + "<th>" + ShowMessage.lblForChannel + "</th></tr></thead><tbody>"; for (var i = 0; i < e.length; i++) { var l = "", a = "", d = e[i].RIGHTS_START_DATE, o = e[i].RIGHTS_END_DATE; null != d && (d = new Date(parseInt(d.substr(6)))), null != o && (o = new Date(parseInt(o.substr(6)))), null != d && null != o && (l = getFormattedDate(d.getMonth() + 1 + "/" + d.getDate() + "/" + d.getFullYear()), a = getFormattedDate(o.getMonth() + 1 + "/" + o.getDate() + "/" + o.getFullYear())), "RTL" == LayoutDirection_G ? (t += "<tr>", t = t + "<td>" + e[i].TITLE_NAME + "</td>", t = t + "<td>" + d.toLocaleString("ar-AE") + "</td>", t = t + "<td>" + o.toLocaleString("ar-AE") + "</td>", t = t + "<td>" + e[i].CHANNEL_NAME + "</td></tr>") : (t += "<tr>", t = t + "<td>" + e[i].TITLE_NAME + "</td>", t = t + "<td>" + l + "</td>", t = t + "<td>" + a + "</td>", t = t + "<td>" + e[i].CHANNEL_NAME + "</td></tr>") } t += "<tbody></table>", document.getElementById("lblConflictHeading").innerHTML = ShowMessage.lblForConflictCombination, $("#conflictRun").html(t), $("#popRunDefn").modal(), n = !1 } hideLoading() }, error: function (e) { alert("Error: " + e.responseText) } }), n } function ValidateTime() { showLoading(); var e = ""; null != $("#lbChannel").val() && (e = $("#lbChannel").val().join(",")); var t = !0; return $.ajax({ type: "POST", url: URL_ValidateTime, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", async: !1, data: JSON.stringify({ No_Of_Runs: $("#addLimited2").val(), Run_Type: $("input[name=Run_Type]:checked").val(), Is_Prime_OffPrime_Defn: $("input[name=Is_Prime_OffPrime_Defn]:checked").val(), Prime_Start_Time: $("input[name=Prime_Start_Time]").val(), Prime_End_Time: $("input[name=Prime_End_Time]").val(), Prime_Run: $("input[name=Prime_Run]").val(), Off_Prime_Start_Time: $("input[name=Off_Prime_Start_Time]").val(), Off_Prime_End_Time: $("input[name=Off_Prime_End_Time]").val(), Off_Prime_Run: $("input[name=Off_Prime_Run]").val() }), success: function (e) { "true" == e && redirectToLogin(), "Success" == e ? t = !0 : (showAlert("E", e), t = !1), hideLoading() }, error: function (e) { alert("Error: " + e.responseText) } }), t } function checkChannelMinimum() { var e = "C", t = "CS", n = "A", i = $("input[name=Is_Channel_Definition_Rights]:checked").val(), l = $("input[name=Run_Definition_Type]:checked").val(), a = $("#addLimited2").val(); if ("N" == i) return !0; if ("NOTCHECKED" == l || "C" != $("input[name=Run_Type]:checked").val()) return !0; if (e != l && t != l && n != l) return !0; if (e == l || t == l) { var d = 0, d = 0, o = 0; return $('#tblChannelWise tr input[name*="Min_Runs"]').each(function () { d += parseInt($(this).val()) }), $('#tblChannelWise tr input[name*="Max_Runs"]').each(function () { o += parseInt($(this).val()) }), d != Number(a) && e == l ? (showAlert("E", "Please enter sum of channel wise No.of Runs equal to [" + a + "]"), !1) : t == l ? d != Number(a) ? (showAlert("E", "Please enter sum of minimum channel wise no of Runs equal to [" + a + "]"), !1) : o != Number(a) ? (showAlert("E", "Please enter sum of maximum channel wise no of Runs equal to [" + a + "]"), !1) : !0 : !0 } return n == l ? $('#tblChannelWise tr input[name*="ChannelNames"]').length != a ? (showAlert("E", ShowMessage.lblForEqualChannel), !1) : !0 : void 0 } function AssignTimeJquery() { $("#txtStartNPrimeTime").timeEntry(), $("#txtEndNPrimeTime").timeEntry(), $("#txtTimeLag").timeEntry({ show24Hours: !0, showSeconds: !0 }), $(".PrimetimeRange").timeEntry().change(function (e) { if ("txtEndPrimeTime" === e.currentTarget.id) if ($("#txtEndPrimeTime").timeEntry("getTime").getMinutes() + 1 >= 60) { var t = $("#txtEndPrimeTime").timeEntry("getTime").getMinutes() + 1, n = $("#txtEndPrimeTime").timeEntry("getTime").getHours() + 1; $("#txtEndPrimeTime").timeEntry("getTime").getHours() + 1 >= 24 ? $("#txtStartNPrimeTime").timeEntry("setTime", new Date(0, 0, 0, n - 24, t - 60, 0)) : $("#txtStartNPrimeTime").timeEntry("setTime", new Date(0, 0, 0, n, t - 60, 0)) } else { var i = $("#txtEndPrimeTime").timeEntry("getTime").getMinutes() + 1, l = $("#txtEndPrimeTime").timeEntry("getTime").getHours(); $("#txtStartNPrimeTime").timeEntry("setTime", new Date(0, 0, 0, l, i, 0)) } else if ("txtStartPrimeTime" === e.currentTarget.id) if ($("#txtStartPrimeTime").timeEntry("getTime").getMinutes() - 1 <= 0) { var t = $("#txtStartPrimeTime").timeEntry("getTime").getMinutes() - 1, n = $("#txtStartPrimeTime").timeEntry("getTime").getHours(); -1 === t ? $("#txtEndNPrimeTime").timeEntry("setTime", new Date(0, 0, 0, n - 1, 59, 0)) : $("#txtEndNPrimeTime").timeEntry("setTime", new Date(0, 0, 0, n, 0, 0)) } else { var i = $("#txtStartPrimeTime").timeEntry("getTime").getMinutes() - 1, l = $("#txtStartPrimeTime").timeEntry("getTime").getHours(); $("#txtEndNPrimeTime").timeEntry("setTime", new Date(0, 0, 0, l, i, 0)) } }) } function checkPrimeTime() { "" != $("#txtStartPrimeTime").val() && "" != $("#txtEndPrimeTime") && $("#txtStartPrimeTime").timeEntry("getTime") > $("#txtEndPrimeTime").timeEntry("getTime") && AlertModalPopup($("#txtStartPrimeTime"), "End time is greater than start time") } function PrimecustomRange(e) { return { minTime: "txtEndPrimeTime" === e.id ? $("#txtStartPrimeTime").timeEntry("getTime") : null, maxTime: "txtStartPrimeTime" === e.id ? $("#txtEndPrimeTime").timeEntry("getTime") : null } } function NonPrimecustomRange(e) { return { minTime: "txtEndNPrimeTime" === e.id ? $("#txtStartNPrimeTime").timeEntry("getTime") : null, maxTime: "txtStartNPrimeTime" === e.id ? $("#txtEndNPrimeTime").timeEntry("getTime") : null } } function PrimeRunKeyUp() { $("#txtPrimeRun").keyup(function (e) { if ($("#addLimited2").val() === $("#txtPrimeRun").val()) $("#txtNPrimeRun").val(""), $("#txtStartNPrimeTime").val(""), $("#txtEndNPrimeTime").val(""); else if ("" === $("#txtPrimeRun").val() && "" === $("#txtStartNPrimeTime").val() && "" === $("#txtEndNPrimeTime").val() && "" === $("#txtStartPrimeTime").val() && "" === $("#txtEndPrimeTime").val()) $("#txtNPrimeRun").val(""), $("#txtPrimeRun").val(""); else if ("" === $("#txtPrimeRun").val() && "" === $("#txtStartNPrimeTime").val() && "" === $("#txtEndNPrimeTime").val()) $("#txtNPrimeRun").val(""); else if ("" != $("#txtPrimeRun").val() && "" != $("#addLimited2").val()) { var t = parseInt($("#addLimited2").val()) - parseInt($("#txtPrimeRun").val()); $("#txtNPrimeRun").val(t) } }), $("#txtNPrimeRun").keyup(function (e) { if ($("#addLimited2").val() === $("#txtNPrimeRun").val()) $("#txtPrimeRun").val(""), $("#txtStartPrimeTime").val(""), $("#txtEndPrimeTime").val(""); else if ("" === $("#txtNPrimeRun").val() && "" === $("#txtStartNPrimeTime").val() && "" === $("#txtEndNPrimeTime").val() && "" === $("#txtStartPrimeTime").val() && "" === $("#txtEndPrimeTime").val()) $("#txtNPrimeRun").val(""), $("#txtPrimeRun").val(""); else if ("" === $("#txtNPrimeRun").val() && "" === $("#txtStartPrimeTime").val() && "" === $("#txtEndPrimeTime").val()) $("#txtPrimeRun").val(""); else if ("" != $("#txtNPrimeRun").val() && "" != $("#addLimited2").val()) { var t = parseInt($("#addLimited2").val()) - parseInt($("#txtNPrimeRun").val()); $("#txtPrimeRun").val(t) } }) } function validateOnCancel() { $("#hdnTabName").val(""), showAlert("I", ShowMessage.lblForUnsavedData, "OKCANCEL") } function handleOk() { if ("" == $("#hdnTabName").val()) BindPartialTabs(pageRun); else { var e = $("#hdnTabName").val(); BindPartialTabs(e) } } function OnSuccess(e) { if (hideLoading(), e == ShowMessage.lblForRunUpdate || e == ShowMessage.lblForRunAdded) showAlert("S", e, "OK"); else if (e.length > 0) { var t = "<table class='table table-bordered table-hover'><thead><tr>"; t += "<th>Title</th>", t += "<th>Start Date</th>", t += "<th>End Date</th>", t += "<th>Channel</th>", t += "<th>User Allocated Runs</th>", t += "<th>Scheduled Runs</th>", t += "</tr></thead><tbody>"; for (var n = 0; n < e.length; n++) t += "<tr>", t = t + "<td>" + e[n].Title_Name + "</td>", t = t + "<td>" + e[n].StartDate + "</td>", t = t + "<td>" + e[n].EndDate + "</td>", t = t + "<td>" + e[n].Channel_Name + "</td>", t = t + "<td>" + e[n].No_Of_Runs + "</td>", t = t + "<td>" + e[n].No_Of_Schd_Run + "</td>", t += "</tr>"; t += "<tbody></table>", t += "<br /><b>Note</b>: User Allocated Runs should be greater than or equal to Scheduled Runs", document.getElementById("lblConflictHeading").innerHTML = ShowMessage.lblForInvalidRun, $("#conflictRun").html(t), $("#popRunDefn").modal(), isValid = !1 } } function BindAllPreReq_Async() { showLoading(), $.ajax({ type: "POST", url: URL_BindAllPreReq_Async, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", async: !0, success: function (e) { if ("true" == e) redirectToLogin(); else if ($.each(e.Title_List, function () { $("#ddlPTitle").append($("<option />").val(this.Value).text(this.Text)) }), "" != e.Selected_Title_Codes && $("#ddlPTitle").val(e.Selected_Title_Codes.split(",")), "C" == runType_G && null != e.Is_SubLic && (0 == e.Is_SubLic ? (document.getElementById("addSynRun").style.display = "none", document.getElementById("lbladdNoRun").style.display = "none", document.getElementById("addNoRun").style.display = "none", document.getElementById("lbladdSynRun").style.display = "none", document.getElementById("addLimited2").readOnly = !1) : (document.getElementById("addSynRun").style.display = "", document.getElementById("lbladdNoRun").style.display = "", document.getElementById("addNoRun").style.display = "", document.getElementById("lbladdSynRun").style.display = "", document.getElementById("addLimited2").readOnly = !0)), $.each(e.Channel_List, function () { $("#lbChannel").append($("<option />").val(this.Value).text(this.Text)) }), "" != e.Selected_Channel_Codes && $("#lbChannel").val(e.Selected_Channel_Codes.split(",")), null != e.Selected_Channel_Cluster_Codes && ($.each(e.Channel_Cluster_List, function () { $("#lbChannelCluster").append($("<option />").val(this.Value).text(this.Text)) }), "" != e.Selected_Channel_Cluster_Codes && $("#lbChannelCluster").val(e.Selected_Channel_Cluster_Codes)), $.each(e.RightRule_List, function () { $("#ddlRuleRight").append($("<option />").val(this.Value).text(this.Text)) }), $("#ddlRuleRight").val(e.Right_Rule_Code), $("#lbChannel,#ddlRuleRight").trigger("chosen:updated"), $("#lbChannelCluster").trigger("chosen:updated"), $("#ddlPTitle,#lbChannel").each(function () { $(this)[0].sumo.reload() }), acqDealRunCode_G > 0 && "Y" == isRuleRight_G && (bindRuleRecord(document.getElementById("ddlRuleRight")), setChosenWidth("#ddlRuleRight", "45%")), "Y" == isChannelDefinitionRights_G) { var t = '<option value="0">Please Select</option>'; $("#lbChannel option:selected").each(function () { var e = $(this); t += e[0].outerHTML }), $("#ddlPrimaryChannel").html(t), "" != primaryChannelCode_G ? $('#ddlPrimaryChannel option[value="' + primaryChannelCode_G + '"]').attr("selected", "selected") : $("#ddlPrimaryChannel option[value= 0]").attr("selected", "selected"), $("#ddlPrimaryChannel").trigger("chosen:updated"); var t = '<option value="0">Please Select</option>'; $("#ddlPrimaryChannelCluster").html(t), $.each(e.PrimarychannelList, function () { $("#ddlPrimaryChannelCluster").append($("<option />").val(this.Value).text(this.Text)) }), "" != primaryChannelClusterCode_G ? $('#ddlPrimaryChannelCluster option[value="' + primaryChannelClusterCode_G + '"]').attr("selected", "selected") : $("#ddlPrimaryChannelCluster option[value= 0]").attr("selected", "selected"), $("#ddlPrimaryChannelCluster").trigger("chosen:updated") } hideLoading() }, error: function (e) { alert("Error: " + e.responseText) } }) } $(document).ready(function () {
    if (showLoading(), $("#ddlPTitle,#lbChannel").SumoSelect(), recordLockingCode_G > 0 && Call_RefreshRecordReleaseTime(recordLockingCode_G, URL_Global_Refresh_Lock), acqDealRunCode_G > 0) {
        if ($("#tdTitleCodes").append(strTitleHiddenHtml_G), $("input[name=Run_Type][value=" + runType_G + "]").prop("checked", !0), "C" == runType_G ? ($("input[name=Is_Yearwise_Definition]").prop("disabled", ""), $("input[name=Is_Prime_OffPrime_Defn]").prop("disabled", ""), document.getElementById("addLimited2").style.display = "", document.getElementById("lblAddLimited").style.display = "", document.getElementById("addSynRun").style.display = "", document.getElementById("lbladdNoRun").style.display = "", document.getElementById("addNoRun").style.display = "", document.getElementById("lbladdSynRun").style.display = "") : "U" == runType_G && (document.getElementById("addSynRun").style.display = "none", document.getElementById("addSynRun").value = "0", document.getElementById("lbladdNoRun").style.display = "none", document.getElementById("addNoRun").style.display = "none", document.getElementById("lbladdSynRun").style.display = "none", document.getElementById("addLimited2").style.display = "none", document.getElementById("lblAddLimited").style.display = "none", $('input[name=Is_Yearwise_Definition][value="N"]').prop("checked", !0), $("input[name=Is_Yearwise_Definition]").prop("disabled", "disabled"), document.getElementById("addrunsDef2").style.display = "none", $('input[name=Is_Prime_OffPrime_Defn][value="N"]').prop("checked", !0), $("input[name=Is_Prime_OffPrime_Defn]").prop("disabled", "disabled"), document.getElementById("rowPrime1").style.display = "none", document.getElementById("rowPrime2").style.display = "none"), $("input[name=Is_Yearwise_Definition][value=" + isYearWise_G + "]").prop("checked", !0), yearWiseScheduleRunCount_G > 0 && "Y" == isYearWise_G && $("input[name=Is_Yearwise_Definition]").prop("disabled", "disabled"), "Y" == isYearWise_G ? (document.getElementById("addrunsDef2").style.display = "", $.ajax({
            type: "POST", url: URL_PartialYearWiseList, traditional: !0, enctype: "multipart/form-data",
            contentType: "application/json; charset=utf-8", data: JSON.stringify({}), success: function (e) { "true" == e && redirectToLogin(), $("#addrunsDef2").html(e), $(".numbertext").numeric({ allowMinus: !1, allowThouSep: !1, allowDecSep: !1, maxPreDecimalPlaces: 5, maxDecimalPlaces: 0 }), hideLoading() }, error: function (e) { alert("Error: " + e.responseText), hideLoading() }
        })) : document.getElementById("addrunsDef2").style.display = "none", $("input[name=Is_Rule_Right][value=" + isRuleRight_G + "]").prop("checked", !0), $("select#ddlRuleRight.form_input.chosen-select").val(rightRuleCode_G).trigger("chosen:updated"), "Y" == isRuleRight_G) { bindRuleRecord(document.getElementById("ddlRuleRight")); for (var e = 1; 8 > e; e++) document.getElementById("RuleEdit_" + e).style.display = ""; "D" == repeatWithinDaysHrs_G ? (SelectDaysCheckbox(), document.getElementById("RuleEdit_7").style.display = "", $("#lblDaysHours")[0].innerHTML = "Days", $("#lblDaysHours")[0].innerText = "Days") : (document.getElementById("RuleEdit_7").style.display = "none", $("#lblDaysHours")[0].innerHTML = "Hrs", $("#lblDaysHours")[0].innerText = "Hrs") } $("input[name=Is_Channel_Definition_Rights][value=" + isChannelDefinitionRights_G + "]").prop("checked", !0), "Y" == isChannelDefinitionRights_G ? ($("input[name=Run_Definition_Type][value=" + runDefinitionType_G + "]").prop("checked", !0), document.getElementById("addChannel_edit").style.display = "", document.getElementById("addChannel2_edit").style.display = "", "C" == runDefinitionType_G ? (document.getElementById("showRundefinition2_1").style.display = "", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none") : "CS" == runDefinitionType_G ? (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none") : "A" == runDefinitionType_G ? (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none") : "S" == runDefinitionType_G ? (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "", document.getElementById("showRundefinition2_5").style.display = "none") : "N" == runDefinitionType_G && (document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none"), $.ajax({ type: "POST", url: URL_PartialChannelList1, traditional: !0, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", data: JSON.stringify({ Acq_Deal_Run_Code: acqDealRunCode_G }), success: function (e) { "true" == e && redirectToLogin(), "C" == runDefinitionType_G ? $("#showRundefinition2_1").html(e) : "CS" == runDefinitionType_G ? $("#showRundefinition2_2").html(e) : "A" == runDefinitionType_G ? $("#showRundefinition2_3").html(e) : "S" == runDefinitionType_G && $("#showRundefinition2_4").html(e), $(".numbertext").numeric({ allowMinus: !1, allowThouSep: !1, allowDecSep: !1, maxPreDecimalPlaces: 5, maxDecimalPlaces: 0 }), hideLoading() }, error: function (e) { alert("Error: " + e.responseText) } })) : (document.getElementById("addChannel_edit").style.display = "none", document.getElementById("addChannel2_edit").style.display = "none"), primeRun_G + offPrimeRun_G > 0 ? ($('input[name=Is_Prime_OffPrime_Defn][value="Y"]').prop("checked", !0), showPrime(document.getElementById("Is_Prime_OffPrime_Defn"))) : $('input[name=Is_Prime_OffPrime_Defn][value="N"]').prop("checked", !0)
    } else $('input[name=Is_Yearwise_Definition][value="N"]').prop("checked", !0), $("input[name=Is_Yearwise_Definition]").prop("disabled", "disabled"), $("#hdnIs_Yearwise_Definition").val("N"), document.getElementById("addrunsDef2").style.display = "none", $('input[name=Is_Prime_OffPrime_Defn][value="N"]').prop("checked", !0), $("input[name=Is_Prime_OffPrime_Defn]").prop("disabled", "disabled"), document.getElementById("rowPrime1").style.display = "none", document.getElementById("rowPrime2").style.display = "none"; "Y" == runDisableChannelwise_G && ($('input[name=Is_Channel_Definition_Rights][value="Y"]').prop("checked", !0), $("input[name=Is_Channel_Definition_Rights]").prop("disabled", "disabled"), $("#hdnIs_Channel_Definition_Rights").val("Y"), document.getElementById("addChannel_edit").style.display = "", document.getElementById("addChannel2_edit").style.display = ""), $(".numbertext").numeric({ allowMinus: !1, allowThouSep: !1, allowDecSep: !1, maxPreDecimalPlaces: 5, maxDecimalPlaces: 0 }); $("#lbChannel").on("change", function (e, t) { void 0 != t && void 0 != t.deselected && $.ajax({ type: "POST", url: URL_CheckIfShowLinked, traditional: !0, async: !1, enctype: "multipart/form-data", contentType: "application/json; charset=utf-8", data: JSON.stringify({ Acq_Deal_Run_Code: $("#Acq_Deal_Run_Code").val(), selectedChannel: t.deselected }), success: function (e) { e > 0 && (showAlert("E", ShowMessage.MsgForLinked), $("#lbChannel").find("option[value=" + t.deselected + "]").attr("selected", !0), $("#lbChannel")[0].sumo.reload()) }, error: function (e) { alert("Error: " + e.responseText) } }); var n = '<option value="0">Please Select</option>'; $("#lbChannel option:selected").each(function () { var e = $(this); n += e[0].outerHTML }), $("#ddlPrimaryChannel").html(n), $("#ddlPrimaryChannel option[value= 0]").attr("selected", "selected"), $("#showRundefinition2_1").empty(), $("#showRundefinition2_2").empty(), $("#showRundefinition2_3").empty(), $("#showRundefinition2_4").empty(), document.getElementById("showRundefinition2_1").style.display = "none", document.getElementById("showRundefinition2_2").style.display = "none", document.getElementById("showRundefinition2_3").style.display = "none", document.getElementById("showRundefinition2_4").style.display = "none", document.getElementById("showRundefinition2_5").style.display = "none", $("input[name=Run_Definition_Type]").prop("checked", !1), $("#ddlPrimaryChannel").trigger("chosen:updated") }), hideLoading(), AssignTimeJquery(), PrimeRunKeyUp(), BindAllPreReq_Async(), "G" == channelType ? ($("#divChannelCategory").show(), $("#addChannel_edit").hide()) : ($("#addChannel_edit").show(), $("#divChannelCategory").hide())
});