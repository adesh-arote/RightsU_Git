function ValidatePageSize(){var n=$("#txtPageSize").val(),t;return $.trim(n)!=""&&(t=parseInt(n),t>0)?!0:($("#txtPageSize").addClass("required"),!1)}function ClearTitleValues(){$("#ddlTitleCode").find("option").attr("selected",!1);$("#ddlTitleCode").val("").trigger("chosen:updated")}function BindGrid(n){var e,f;showLoading();var t="",r=0,i="",u=0;n==null?(t="G",Pushback_View_G!=null&&($("#"+Pushback_View_G)[0].checked=!0,t=Pushback_View_G),Pushback_Titles_G!=null&&Pushback_Titles_G!=""&&(i=Pushback_Titles_G),Pushback_PageSize_G!=null&&Pushback_PageSize_G!="0"&&$("#txtPageSize").val(Pushback_PageSize_G),Pushback_PageNo_G!=null&&Pushback_PageNo_G!="0"&&(u=parseInt(Pushback_PageNo_G)-1)):t=$("input[name=optLicnsorHB]:checked").val();$("#ddlTitleCode").val()!=null&&(i=$("#ddlTitleCode").val().join(","));$("#hdnCurrentPageNo").val()!=undefined&&$("#hdnCurrentPageNo").val()!=""&&(r=$("#hdnCurrentPageNo").val());e=parseInt(r)-1;n==null&&(f=$("#txtPageSize").val(),$.ajax({type:"POST",url:URL_BindGrid,traditional:!0,async:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Selected_Title_Code:i,view_Type:t,txtpageSize:f,page_index:u,IsCallFromPaging:"N"}),success:function(n){n=="true"&&redirectToLogin();$(".div_BindGrid").html(n);SetPaging($("#txtPageSize").val());setNumericForPagingSize();initializeExpander();hideLoading();CheckRightStatus()},error:function(){}}))}function BindGridNew(n,t){var r,i,u,f,e;if(showLoading(),ValidatePageSize()){if(r="",i="",$("#ddlTitleCode").val()!=undefined&&$("#ddlTitleCode").val()!=null&&(i=$("#ddlTitleCode").val().join(",")),r=n==null?"G":$("input[name=optLicnsorHB]:checked").val(),r!="G")if(i!="")i=$("#ddlTitleCode").val().join(",");else{showAlert("info","Please select atleast one title to view","ddlTitleCode");hideLoading();$("#G").prop("checked",!0);return}r=="G"&&(ClearTitleValues(),i="");u=1;f=0;$("#ddlTitleCode").val()!=null&&r!="G"&&(i=$("#ddlTitleCode").val().join(","));$("#hdnCurrentPageNo").val()!=undefined&&$("#hdnCurrentPageNo").val()!=""&&(u=$("#hdnCurrentPageNo").val());f=parseInt(u)-1;e=$("#txtPageSize").val();$.ajax({type:"POST",url:URL_BindGrid,traditional:!0,async:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Selected_Title_Code:i,view_Type:r,txtpageSize:e,page_index:f,IsCallFromPaging:t}),success:function(n){n=="true"&&redirectToLogin();$(".div_BindGrid").html(n);SetPaging($("#txtPageSize").val());initializeExpander();hideLoading();CheckRightStatus()},error:function(){hideLoading()}})}else Pushback_View_G!=null&&($("#"+Pushback_View_G)[0].checked=!0)}function DeleteRight(n){showLoading();var t=$("#"+n+"_hdnTitleCode").val(),i=$("#"+n+"_hdnPlatformCode").val(),r=$("#"+n+"_hdnEpisodeFrom").val(),u=$("#"+n+"_hdnEpisodeTo").val(),f=$("#"+n+"_hdnRightCode").val(),e=$("#"+n+"_hdnDealCode").val(),o=$("input[name=optLicnsorHB]:checked").val(),h=$("#"+n+"_hdnIsDelete").val(),s=$("#"+n+"_hdnIs_Syn_Acq_Mapp").val();s=="Y"?(showAlert("error","Can not delete right as it is already syndicated."),hideLoading()):$.ajax({type:"POST",url:URL_DeletePushback,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({RightCode:f,DealCode:e,TitleCode:t,PlatformCode:i,EpisodeFrom:r,EpisodeTo:u,ViewType:o}),success:function(n){n=="true"&&redirectToLogin();showAlert("info",n);BindGridNew($("#G")[0],"N");hideLoading()},error:function(){alert("Error");hideLoading()}})}function ValidateDelete(n){ValidatePageSize()&&($("#hdnCurrentID").val(n),showAlert("I","Are you sure you want to delete this right?","OKCANCEL"))}function handleCancel(){}function handleOk(){var n=$("#hdnCurrentID").val();DeleteRight(n)}function ValidateSave(){var n,t;return showLoading(),n=!0,ValidatePageSize()&&Mode_G=="APRV"&&(n=SaveApprovalRemarks()?!0:!1),n?(hideLoading(),t=$("#hdnTabName").val(),BindPartialTabs(t)):hideLoading(),n}function SaveApprovalRemarks(){var n=!0,t=Mode_G,i;return t=="APRV"?(i=$("#approvalremarks").val(),$.ajax({type:"POST",url:URL_SetApprovalRemarks,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!0,data:JSON.stringify({approvalremarks:$("#approvalremarks").val()}),success:function(t){t=="true"&&redirectToLogin();n=!0;hideLoading()},error:function(){n=!1}})):n=!0,n}function Show_Error_Popup(n,t,i,r){showLoading();$("#hdnSynDealCode").val(r);$.ajax({type:"POST",url:URL_Show_Error_Popup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({searchForTitles:n,PageSize:t,PageNo:i,RightsCode:r,ErrorMsg:$("#ddlErrorType").val()}),async:!1,success:function(n){n=="true"?redirectToLogin():$("#BindErrorPopup").html(n)},error:function(n){alert("Error: "+n.responseText)}});$("#popupShowError").modal();initializeChosen();initializeExpander();hideLoading()}function OpenPopup(n){$("#"+n).modal()}function Edit_Pushback(n){if(!ValidatePageSize())return!1;showLoading();var t=$("#"+n+"_hdnRightCode").val(),i=$("#"+n+"_hdnTitleCode").val(),f=$("#"+n+"_hdnPlatformCode").val(),r=$("#"+n+"_hdnEpisodeFrom").val(),u=$("#"+n+"_hdnEpisodeTo").val(),e=$("input[name=optLicnsorHB]:checked").val(),o=$("#Title_Code").val()==null?"":$("#Title_Code").val().join(",");ValidateRightsTitleWithAcq(t,i,r,u)&&$.ajax({type:"POST",url:URL_Edit_Pushback,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({PushbackCode:t,TitleCode:i,PlatformCode:f,EpisodeFrom:r,EpisodeTo:u,View_Type:e,Title_Code_Search:o}),success:function(n){n=="true"&&redirectToLogin();$("#popEditRevHB").html(n);setChosenWidth("#lbTitle_Popup","92%");initializeDatepicker();$("#txtRight_Start_Date").datepicker();$("#txtRight_End_Date").datepicker();initializeDateRange("txtRight_Start_Date","txtRight_End_Date");OpenPopup("popEditRevHB");hideLoading()},error:function(){alert("Error")}})}function Add(){if(!ValidatePageSize())return!1;showLoading();var n=$("#Title_Code").val()==null?"":$("#Title_Code").val().join(","),t=$("input[name=optLicnsorHB]:checked").val();$.ajax({type:"POST",url:URL_Add,traditional:!0,async:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify({View_Type_Search:t,Title_Code_Search:n}),success:function(n){n=="true"&&redirectToLogin();$("#popEditRevHB").html(n);setChosenWidth("#lbTitle_Popup","92%");OpenPopup("popEditRevHB");hideLoading()},error:function(n){alert("Error: "+n.responseText)}})}function OnSuccess(n){var t,i,r;hideLoading();n=="ERROR"?Show_Validation_Popup("",5,0):n!=""&&($("#popEditRevHB").modal("hide"),showAlert("S",n),t=0,$("#hdnCurrentPageNo").val()!=undefined&&$("#hdnCurrentPageNo").val()!=""&&(t=$("#hdnCurrentPageNo").val()),i=parseInt(t)-1,r=$("input[name=optLicnsorHB]:checked").val(),BindGridNew(null,"N"))}function Reprocess(){showLoading();$.ajax({type:"POST",url:URL_Reprocess,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Rights_Code:$("#hdnSynDealCode").val()}),async:!1,success:function(n){if(hideLoading(),n=="true")redirectToLogin();else if(n.RedirectTo!="")showLD="N",$("#popupShowError").modal("hide"),$(document.getElementsByClassName("modal-open")).removeClass("modal-open"),showAlert("S","Reverse Holdback Reprocessed Successfully."),$(document.getElementsByClassName("modal-backdrop")).remove(),BindGridNew($("#G")[0],"N");else return $("#popupShowError").modal("hide"),showAlert("E",n.Message),!1},error:function(n){$("#popupShowError").modal("hide");showAlert("e",n.responseText)}})}function ValidateRightsTitleWithAcq(n,t,i,r){var u=!0;return showLoading(),$.ajax({type:"POST",url:URL_ValidateRightsTitleWithAcq,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!1,data:JSON.stringify({RCode:n,TCode:t,Episode_From:i,Episode_To:r}),success:function(n){n=="true"&&redirectToLogin();n=="VALID"?u=!0:(showAlert("E","Can not edit Reverse Holdback as corresponding Acquisition Deal is in Amendment state"),u=!1);hideLoading()},error:function(){u=!1}}),u}function CheckRightStatus(){var n=0;$("#clsLiAction").each(function(){var o=$(this).find("input[id*='hdnRefCloseTitle']").val(),e,t;if(o!="Y"&&(e=$(this).find("input[id*='hdnRightStatus']").val(),e=="P"&&(t=$(this).find("input[id*='hdnRightCode']").val(),isNaN(t)&&(t=0),t>0))){var i=$(this).find("a[id*='btnEdit']"),r=$(this).find("a[id*='btnDelete']"),s=$(this).find("a[id*='btnClone']"),u=$(this).find("a[id*='btnShowError']"),f=$(this).find("img[id*='imgLoading']");$.ajax({type:"POST",url:URL_GetSynRightStatus,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!1,data:JSON.stringify({rightCode:t,dealCode:0}),success:function(t){t=="true"&&redirectToLogin();t.RecordStatus=="E"?(i[0].style.display="",r[0].style.display="",u[0].style.display="",f[0].style.display="none",$(this).find("input[id*='hdnRightStatus']").val("E")):t.RecordStatus=="C"?(i[0].style.display="",r[0].style.display="",u[0].style.display="none",f[0].style.display="none",$(this).find("input[id*='hdnRightStatus']").val("C")):t.RecordStatus=="P"&&(i[0].style.display="none",r[0].style.display="none",u[0].style.display="none",f[0].style.display="",$(this).find("input[id*='hdnRightStatus']").val("P"),n++)},error:function(){}})}});n>0&&setTimeout(CheckRightStatus,5e3)}function fillTotal(){var t=0,n="";$("#lbTerritory_Popup option:selected").length>0&&$("#lbTerritory_Popup option:selected").each(function(){n=n==""?$(this).val():n+","+$(this).val();t++});$("#RCount").html(t)}$(document).ready(function(){var t,n;$("#txtPageSize").numeric({max:100,min:1});parseInt(Record_Locking_Code_G)>0&&(t=URL_Refresh_Lock,Call_RefreshRecordReleaseTime(Record_Locking_Code_G,t));n=document.getElementById("txtAcqRemarks");n!=null&&countChar(n)});var SelectedTitles="",ViewType="";$(document).ready(function(){BindGrid(null);$("#btnShowAll").click(function(){ValidatePageSize()&&($("#G").prop("checked",!0),ClearTitleValues(),BindGridNew($("#G")[0],"N"))});$("#ddlTitleCode").change(function(){SelectedTitles=$(this).val()})});
//# sourceMappingURL=Syn_Deal_Pushback.min.js.map
