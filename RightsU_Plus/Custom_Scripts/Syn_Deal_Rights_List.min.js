function ValidatePageSize(){var n=$("#txtPageSize").val(),t;return $.trim(n)!=""&&(t=parseInt(n),t>0)?!0:($("#txtPageSize").addClass("required"),!1)}function ClearTitleValues(){$("#ddlTitleCode").find("option").attr("selected",!1);$("#ddlTitleCode").val("").trigger("chosen:updated")}function BindGrid(n){var t="",r=0,i="",u=0,e,f;n==null?(t="G",Rights_View_G!=null&&($("#"+Rights_View_G)[0].checked=!0,t=Rights_View_G),Rights_Titles_G!=null&&Rights_Titles_G!=""&&(i=Rights_Titles_G),Rights_PageSize_G!=null&&Rights_PageSize_G!="0"&&$("#txtPageSize").val(Rights_PageSize_G),Rights_PageNo_G!=null&&Rights_PageNo_G!="0"&&(u=parseInt(Rights_PageNo_G)-1)):t=$("input[name=optViewType]:checked").val();$("#ddlTitleCode").val()!=null&&(i=$("#ddlTitleCode").val().join(","));$("#hdnCurrentPageNo").val()!=undefined&&$("#hdnCurrentPageNo").val()!=""&&(r=$("#hdnCurrentPageNo").val());e=parseInt(r)-1;n==null&&(f=$("#txtPageSize").val(),$.ajax({type:"POST",url:URL_BindGrid,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",asyn:!1,data:JSON.stringify({Selected_Title_Code:i,view_Type:t,txtpageSize:f,page_index:u,IsCallFromPaging:"N"}),success:function(n){n=="true"&&redirectToLogin();$(".div_BindGrid").html(n);SetPaging($("#txtPageSize").val());setNumericForPagingSize();initializeExpander();CheckRightStatus()},error:function(){}}))}function BindGridNew(n,t){var r,i;if(ValidatePageSize()){if(r="",i="",$("#ddlTitleCode").val()!=undefined&&$("#ddlTitleCode").val()!=null&&(i=$("#ddlTitleCode").val().join(",")),r=n==null?"G":$("input[name=optViewType]:checked").val(),r!="G")if(i!="")i=$("#ddlTitleCode").val().join(",");else{showAlert("info","Please select atleast one title to view","ddlTitleCode");hideLoading();$("#G").prop("checked",!0);return}r=="G"&&(ClearTitleValues(),i="");var u=1,f=0,e=$("#txtPageSize").val();$("#ddlTitleCode").val()!=null&&r!="G"&&(i=$("#ddlTitleCode").val().join(","));$("#hdnCurrentPageNo").val()!=undefined&&$("#hdnCurrentPageNo").val()!=""&&(u=$("#hdnCurrentPageNo").val());f=parseInt(u)-1;$.ajax({type:"POST",url:URL_BindGrid,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Selected_Title_Code:i,view_Type:r,txtpageSize:e,page_index:f,IsCallFromPaging:t}),success:function(n){n=="true"&&redirectToLogin();$(".div_BindGrid").html(n);SetPaging($("#txtPageSize").val());hideLoading();CheckRightStatus()},error:function(){hideLoading()}})}else Rights_View_G!=null&&($("#"+Rights_View_G)[0].checked=!0)}function DeleteRight(n){var t=$("#"+n+"_hdnTitleCode").val(),i=$("#"+n+"_hdnPlatformCode").val(),r=$("#"+n+"_hdnEpisodeFrom").val(),u=$("#"+n+"_hdnEpisodeTo").val(),f=$("#"+n+"_hdnRightCode").val(),e=$("#"+n+"_hdnDealCode").val(),o=$("input[name=optViewType]:checked").val(),h=$("#"+n+"_hdnIsDelete").val(),s=$("#"+n+"_hdnIs_Syn_Acq_Mapp").val();s=="Y"?(showAlert("error","Can not delete right as it is already syndicated."),hideLoading()):$.ajax({type:"POST",url:URL_DeleteRight,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({RightCode:f,DealCode:e,TitleCode:t,PlatformCode:i,EpisodeFrom:r,EpisodeTo:u,ViewType:o}),success:function(n){n=="true"&&redirectToLogin();hideLoading();showAlert("info",n);BindGridNew($("#G")[0],"N")},error:function(){alert("Error");hideLoading()}})}function ValidateDelete(n){ValidatePageSize()&&($("#hdnCurrentID").val(n),$("#hdn_Command_Name").val("DELETE"),showAlert("I","Are you sure you want to delete this right?","OKCANCEL"))}function handleCancel(){}function handleOk(){if(MessageFrom=="SV"&&$("#hdnTabName").val()==""&&($("#hdn_Command_Name").val(""),window.location.href=URL_Index),$("#hdn_Command_Name").val()!=undefined&&$("#hdn_Command_Name").val()!=""&&$("#hdn_Command_Name").val()=="CANCEL_SAVE_DEAL")location.href=URL_Cancel;else if($("#hdn_Command_Name").val()!=undefined&&$("#hdn_Command_Name").val()!=""&&$("#hdn_Command_Name").val()=="DELETE"){showLoading();var n=$("#hdnCurrentID").val();DeleteRight(n)}}function ValidateSave(){var n,t;return showLoading(),clickedOnTab?$("input[name=hdnReopenMode]").val("E"):$(event.target).val().toUpperCase()=="SAVE & APPROVE"?$("input[name=hdnReopenMode]").val("RO"):$("input[name=hdnReopenMode]").val("E"),n=!0,ValidatePageSize()&&Dealmode_G=="APRV"&&(n=SaveApprovalRemarks()?!0:!1),n&&(Dealmode_G==dealMode_View||Dealmode_G=="APRV")&&(hideLoading(),t=$("#hdnTabName").val(),BindPartialTabs(t)),hideLoading(),n}function ValidateRightsTitleWithAcq(n,t,i,r,u,f,e,o){var s=!0;return $.ajax({type:"POST",url:URL_ValidateRightsTitleWithAcq,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!1,data:JSON.stringify({RCode:n,TCode:t,Episode_From:i,Episode_To:r}),success:function(h){h=="true"&&redirectToLogin();h=="VALID"?(s=!0,ButtonEvents(o,n,t,i,r,u,f,e)):(hideLoading(),showAlert("E","Can not edit Rights as corresponding Acquisition Deal is in Amendment state"),s=!1)},error:function(){s=!1}}),s}function SaveApprovalRemarks(){var n=!0,t=Dealmode_G,i;return t=="APRV"?(i=$("#approvalremarks").val(),$.ajax({type:"POST",url:URL_SetSynApprovalRemarks,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!0,data:JSON.stringify({approvalremarks:$("#approvalremarks").val()}),success:function(t){t=="true"&&redirectToLogin();n=!0;hideLoading()},error:function(){n=!1}})):n=!0,n}function Show_Error_Popup(n,t,i,r){$("#hdnSynDealCode").val(r);$.ajax({type:"POST",url:URL_Show_Error_Popup,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({searchForTitles:n,PageSize:t,PageNo:i,RightsCode:r,ErrorMsg:$("#ddlErrorType").val()}),async:!1,success:function(n){n=="true"?redirectToLogin():$("#BindErrorPopup").html(n)},error:function(n){alert("Error: "+n.responseText)}});$("#popupShowError").modal();initializeExpander();initializeChosen();setChosenWidth("#lbTitle_ErrorPopup","85%");hideLoading()}function Reprocess(){showLoading();$.ajax({type:"POST",url:URL_Reprocess,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({Rights_Code:$("#hdnSynDealCode").val()}),async:!1,success:function(n){if(n=="true")redirectToLogin();else if(n.RedirectTo!="")showLD="N",$("#popupShowError").modal("hide"),BindGridNew($("#G")[0],"N"),$(document.getElementsByClassName("modal-open")).removeClass("modal-open"),$(document.getElementsByClassName("modal-backdrop")).remove(),showAlert("S",n.Message);else return $("#popupShowError").modal("hide"),showAlert("E",n.Message),!1},error:function(n){$("#popupShowError").modal("hide");showAlert("e",n.responseText)}})}function CancelSaveDeal(){$("#hdn_Command_Name").val("CANCEL_SAVE_DEAL");showAlert("I","All unsaved data will be lost, still want to go ahead?","OKCANCEL")}function Save_Success(n){if(n=="true")redirectToLogin();else if(n.Status.toUpperCase()=="SA"&&$.ajax({type:"POST",url:URL_Syn_Approve_Reject,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",data:JSON.stringify({user_Action:"A",approvalremarks:""}),async:!1,success:function(){var n=$("#hdnTabName").val();BindPartialTabs(n)}}),n.Success_Message!="")MessageFrom="SV",showAlert("S",n.Success_Message,"OK");else{$("#hdn_Command_Name").val("");var t=$("#hdnTabName").val();BindPartialTabs(t)}}function Cancel_Rights(){BindPartialTabs(pageRights_List)}function ButtonEvents(n,t,i,r,u,f,e,o){$.ajax({type:"POST",url:URL_ButtonEvents,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!1,data:JSON.stringify({MODE:n,RCode:t,PCode:f,TCode:i,Episode_From:r,Episode_To:u,IsHB:e,Is_Syn_Acq_Mapp:o}),success:function(n){n=="true"?redirectToLogin():BindPartialTabs(n.TabName)},error:function(n){alert("Error: "+n.responseText)}})}function Show_Restriction_Remark_popup(n){showLoading();var t=$("#hdnRemarks_"+n).val(),i=$("#"+n+"_hdnRightCode").val(),r=$("#"+n+"_hdnTitleCode").val(),u=$("#"+n+"_hdnEpisodeFrom").val(),f=$("#"+n+"_hdnEpisodeTo").val(),e=$("#"+n+"_hdnPlatformCode").val();t!=""&&($("#lblRestRemark").text(t),$.ajax({type:"POST",url:ShowRestriction_Remarks_Popup_URL,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!0,data:JSON.stringify({RightsCode:i,Title_Code:r,Episode_From:u,Episode_To:f,Platform_Code:e}),success:function(n){var t,i;if(n=="true"&&redirectToLogin(),t="",t=t+"<tr>",t=t+'<th style="width:15%;">Title<\/th>',t=t+'<th style="width:15%;">Platform<\/th>',t=t+'<th style="width:15%;">Region<\/th>',t=t+'<th style="width:15%;">Restriction Remarks<\/th>',t=t+'<th style="width:15%;">Title Language<\/th>',t=t+'<th style="width:10%;">Subtitling<\/th>',t=t+'<th style="width:15%;">Dubbing<\/th>',t=t+"<\/tr>",n!="")for(i=0;i<n.length;i++)t=t+"<tr>",t=t+"<td>"+n[i].Title_Name+"<\/td>",t=t+"<td>",t=t+'<div class="expandable">'+n[i].Platform_Name+"<\/div>",t=t+"<\/td>",t=t+"<td>",t=t+'<div class="expandable">'+n[i].Country_Name+"<\/div>",t=t+"<\/td>",t=t+"<td>",t=t+'<div class="expandable">'+n[i].Restriction_Remarks+"<\/div>",t=t+"<\/td>",t=t+"<td>"+n[i].Is_Title_Language_Right+"<\/td>",t=t+"<td>",t=t+'<div class="expandable">'+n[i].SubTitle_Lang_Name+"<\/div>",t=t+"<\/td>",t=t+"<td>",t=t+'<div class="expandable">'+n[i].Dubb_Lang_Name+"<\/div>",t=t+"<\/td>",t=t+"<\/tr>";$("#tblRestRemarks").html(t);$("#popAddDealMovie").modal();hideLoading();initializeExpander()},error:function(){hideLoading()}}))}function CheckRightStatus(){var n=0;$(".clsTdAction").each(function(){var s=$(this).find("input[id*='hdnRefCloseTitle']").val(),o,t;if(s!="Y"&&(o=$(this).find("input[id*='hdnRightStatus']").val(),o=="P"&&(t=$(this).find("input[id*='hdnRightCode']").val(),isNaN(t)&&(t=0),t>0))){var i=$(this).find("a[id*='btnEdit']"),r=$(this).find("a[id*='btnDelete']"),u=$(this).find("a[id*='btnClone']"),f=$(this).find("a[id*='btnShowError']"),e=$(this).find("img[id*='imgLoading']");$.ajax({type:"POST",url:URL_GetSynRightStatus,traditional:!0,enctype:"multipart/form-data",contentType:"application/json; charset=utf-8",async:!1,data:JSON.stringify({rightCode:t,dealCode:0}),success:function(t){t=="true"&&redirectToLogin();t.RecordStatus=="E"?(i[0].style.display="",r[0].style.display="",u[0].style.display="",f[0].style.display="",e[0].style.display="none",$(this).find("input[id*='hdnRightStatus']").val("E")):t.RecordStatus=="C"?(i[0].style.display="",r[0].style.display="",u[0].style.display="",f[0].style.display="none",e[0].style.display="none",$(this).find("input[id*='hdnRightStatus']").val("C")):t.RecordStatus=="P"&&(i[0].style.display="none",r[0].style.display="none",u[0].style.display="none",f[0].style.display="none",e[0].style.display="",$(this).find("input[id*='hdnRightStatus']").val("P"),n++)},error:function(){}})}});n>0&&setTimeout(CheckRightStatus,5e3)}var Command_Name,MessageFrom="",SelectedTitles="",ViewType="";$(document).ready(function(){var n,i,t;showLoading();n=document.getElementById("txtAcqRemarks");i=Dealmode_G;$("#txtPageSize").numeric({max:100,min:1});parseInt(Record_Locking_Code_G)>0&&(t=URL_Refresh_Lock,Call_RefreshRecordReleaseTime(Record_Locking_Code_G,t));n!=null&&countChar(n);BindGrid(null);hideLoading();$("#btnShowAll").click(function(){ValidatePageSize()&&(showLoading(),$("#G").prop("checked",!0),ClearTitleValues(),BindGridNew($("#G")[0],"N"))});$("#ddlTitleCode").change(function(){SelectedTitles=$(this).val()})});
//# sourceMappingURL=Syn_Deal_Rights_List.min.js.map
